
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>
            LiTScript - Server
        </title>
        <link rel="icon" type="image/icon" href="../images/favicon.svg" />
        <link rel="stylesheet" href="../dist/normal.css" />
        
    </head>
    <body data-syntax-highlight="monokai"
        data-theme="purple-rain">
        
        <div id="navbar">
            
    <div class="navmenu ">
        
    <div class="navitem " >
        <a class="title enabled" href="../index.html" >
            <img src="../images/bulb.svg" />
            <span>LiTScript</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://www.npmjs.com/package/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-npm" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M1 8h22v7h-12v2h-4v-2h-6z" />
            <path d="M7 8v7" />
            <path d="M14 8v7" />
            <path d="M17 11v4" />
            <path d="M4 11v4" />
            <path d="M11 11v1" />
            <path d="M20 11v4" />
        </svg>
            <span>Download</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://github.com/johtela/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
        </svg>
            <span>GitHub</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="../license.html" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-license" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M15 21h-9a3 3 0 0 1 -3 -3v-1h10v2a2 2 0 0 0 4 0v-14a2 2 0 1 1 2 2h-2m2 -4h-11a3 3 0 0 0 -3 3v11" />
            <path d="M9 7l4 0" />
            <path d="M9 11l4 0" />
        </svg>
            <span>License</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Syntax Highlight</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="coding-horror">
        <a   onclick="document.body.syntaxHighlight('coding-horror')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Coding Horror</span>
        </a>
        
    </div>
    <div class="navitem active" id="monokai">
        <a   onclick="document.body.syntaxHighlight('monokai')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Monokai</span>
        </a>
        
    </div>
    <div class="navitem " id="solarized-light">
        <a   onclick="document.body.syntaxHighlight('solarized-light')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Solarized Light</span>
        </a>
        
    </div>
    <div class="navitem " id="son-of-obsidian">
        <a   onclick="document.body.syntaxHighlight('son-of-obsidian')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Son of Obsidian</span>
        </a>
        
    </div>
    </div>
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Theme</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="blueberry">
        <a   onclick="document.body.theme('blueberry')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Blueberry</span>
        </a>
        
    </div>
    <div class="navitem " id="book-cover">
        <a   onclick="document.body.theme('book-cover')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Book Cover</span>
        </a>
        
    </div>
    <div class="navitem " id="brownie">
        <a   onclick="document.body.theme('brownie')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Brownie</span>
        </a>
        
    </div>
    <div class="navitem " id="camouflage">
        <a   onclick="document.body.theme('camouflage')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Camouflage</span>
        </a>
        
    </div>
    <div class="navitem " id="chocolate">
        <a   onclick="document.body.theme('chocolate')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Chocolate</span>
        </a>
        
    </div>
    <div class="navitem " id="greyhound">
        <a   onclick="document.body.theme('greyhound')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Greyhound</span>
        </a>
        
    </div>
    <div class="navitem " id="ice-age">
        <a   onclick="document.body.theme('ice-age')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ice Age</span>
        </a>
        
    </div>
    <div class="navitem " id="mustard">
        <a   onclick="document.body.theme('mustard')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Mustard</span>
        </a>
        
    </div>
    <div class="navitem " id="peachy">
        <a   onclick="document.body.theme('peachy')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Peachy</span>
        </a>
        
    </div>
    <div class="navitem " id="red-alert">
        <a   onclick="document.body.theme('red-alert')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Red Alert</span>
        </a>
        
    </div>
    <div class="navitem " id="ultra-violet">
        <a   onclick="document.body.theme('ultra-violet')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ultra Violet</span>
        </a>
        
    </div>
    <div class="navitem " id="vintage">
        <a   onclick="document.body.theme('vintage')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Vintage</span>
        </a>
        
    </div>
    </div>
    </div>
    </div>
            
    <a class="hamburger">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </a>
        </div>
        
        <div class="layout">
            <div class="sidepane narrow-scrollbars">
                
        <div class="tocmenu">
            <h3>Table of Contents</h3>
            
    <ul>
        
    <li>
        <a href="../index.html"><span>ğŸ </span><span data-toggle="tooltip" data-title="Home page">
            Home
        </span></a>
    </li>
    <li>
        <a href="../introduction.html"><span>ğŸ¤</span><span data-toggle="tooltip" data-title="Introduction and Motivation">
            Introduction
        </span></a>
    </li>
    <li>
        <a href="../getting-started.html"><span>ğŸ</span>Getting Started</a>
    </li>
    <li>
        <a href="config.html"><span>ğŸ›ï¸</span><span data-toggle="tooltip" data-title="Configuration options and command line parsing">
            Configuration
        </span></a>
    </li>
    <li>
        <a href="templates/toc.html"><span>ğŸ“–</span>Table of Contents</a>
    </li>
    <li>
        <a href="templates/front-matter.html"><span>ğŸ“‹</span>Front Matter</a>
    </li>
    <li>
        <a href="region.html"><span>ğŸŒ</span><span data-toggle="tooltip" data-title="Embedding Regions of Code in Markdown">
            Regions
        </span></a>
    </li>
    <li>
        <a href="region-resolver.html"><span>ğŸ”—</span><span data-toggle="tooltip" data-title="Dependency resolution and recursive region expansion">
            Region Resolver
        </span></a>
    </li>
    <li>
        <a href="custom-elem.html"><span>ğŸ”Œ</span>Custom Elements</a>
    </li>
    <li>
        <a href="dependency-graph.html"><span>ğŸ•¸ï¸</span><span data-toggle="tooltip" data-title="Creating module dependency graph">
            Dependency Graph
        </span></a>
    </li>
    <li>
        <a href="bundler.html"><span>ğŸ“¦</span><span data-toggle="tooltip" data-title="Packing JS & CSS files">
            Bundler
        </span></a>
    </li>
    <li>
        <a href="server.html" class="highlight"><span>ğŸ“¡</span><span data-toggle="tooltip" data-title="Development server setup">
            Server
        </span></a>
    </li>
    <li>
        <a href="backend.html"><span>ğŸ”™</span><span data-toggle="tooltip" data-title="Building server side modules">
            Backend Modules
        </span></a>
    </li>
    <li>
        
    <div class="accordion">
        Site Templates
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="templates/template.html"><span>ğŸ“°</span><span data-toggle="tooltip" data-title="Creating static web pages">
            Page Templates
        </span></a>
    </li>
    <li>
        <a href="templates/html.html"><span>ğŸ“</span>HTML Template Literals</a>
    </li>
    <li>
        
    <div class="accordion">
        Default Template
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="../site/pages/normal/index.html"><span>ğŸ˜</span>Normal Page</a>
    </li>
    <li>
        <a href="../site/pages/landing/index.html"><span>ğŸ›¬</span>Landing Page</a>
    </li>
    <li>
        <a href="../site/styles/theme.html"><span>ğŸ¨</span>Theming</a>
    </li>
    </ul>
    </li>
    </ul>
    </li>
    <li>
        
    <div class="accordion">
        Implementation
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="index.html"><span>ğŸ“º</span><span data-toggle="tooltip" data-title="Main program and exports">
            Main Program
        </span></a>
    </li>
    <li>
        <a href="cli.html"><span>ğŸš</span><span data-toggle="tooltip" data-title="Scaffolding functionality">
            Command Line Interface
        </span></a>
    </li>
    <li>
        <a href="weaver.html"><span>ğŸ•·ï¸</span><span data-toggle="tooltip" data-title="Common code for documentation generation">
            Weaver
        </span></a>
    </li>
    <li>
        <a href="md-weaver.html"><span>âœï¸</span><span data-toggle="tooltip" data-title="Markdown generation code">
            Markdown Weaver
        </span></a>
    </li>
    <li>
        <a href="html-weaver.html"><span>ğŸ”—</span><span data-toggle="tooltip" data-title="HTML generation code">
            HTML Weaver
        </span></a>
    </li>
    <li>
        <a href="block-list.html"><span>ğŸ§±</span><span data-toggle="tooltip" data-title="Data structure for code/markdown fragments">
            Source Blocks
        </span></a>
    </li>
    <li>
        
    <div class="accordion">
        Translators
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="translators/translators.html"><span>ğŸ—£ï¸</span><span data-toggle="tooltip" data-title="Registering and getting translators">
            Translating Input Files
        </span></a>
    </li>
    <li>
        <a href="translators/base-translator.html"><span>ğŸ—£ï¸</span><span data-toggle="tooltip" data-title="Base class and other types related to translators">
            Translator Base Class
        </span></a>
    </li>
    <li>
        <a href="translators/md-translator.html"><span>ğŸ—£ï¸</span><span data-toggle="tooltip" data-title="Translator for markdown files">
            Markdown Translator
        </span></a>
    </li>
    <li>
        <a href="translators/ts-translator.html"><span>ğŸ—£ï¸</span><span data-toggle="tooltip" data-title="Common code for TypeScript translator">
            TypeScript Translator
        </span></a>
    </li>
    <li>
        <a href="translators/ts-html-translator.html"><span>ğŸ—£ï¸</span><span data-toggle="tooltip" data-title="Translating TypeScript to HTML">
            TypeScript Translator for HTML Output
        </span></a>
    </li>
    <li>
        <a href="translators/jsdoc-translator.html"><span>ğŸ—£ï¸</span>Generic JSDoc Translator</a>
    </li>
    </ul>
    </li>
    <li>
        <a href="utils.html"><span>ğŸ› ï¸</span><span data-toggle="tooltip" data-title="File path & directory utilities">
            Utilities
        </span></a>
    </li>
    <li>
        <a href="logging.html"><span>ğŸ“’</span><span data-toggle="tooltip" data-title="Outputting errors and progress to console">
            Logging
        </span></a>
    </li>
    </ul>
    </li>
    <li>
        <a href="../license.html"><span>ğŸ“œ</span><span data-toggle="tooltip" data-title="License and usage information">
            License
        </span></a>
    </li>
    </ul>
        </div>
                <div class="toc-button"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M7 7l5 5l-5 5" />
            <path d="M13 7l5 5l-5 5" />
        </svg></div>
            </div>
            
        <div class="contentarea closepopups">
            <h1 id="development-server">Development Server</h1>
<p>New in version 2, LiTScript comes with an integrated web server that
eliminates the need for additional tools and improves the development
experience. The server supports live reloading of changed files.</p>
<details>
<summary>server imports</summary>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="284" data-toggle="tooltip" data-title="typeof http">http</span> <span class="keyword">from</span> <span class="string">&#039;http&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="313" data-toggle="tooltip" data-title="typeof fs">fs</span> <span class="keyword">from</span> <span class="string">&#039;fs&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="338" data-toggle="tooltip" data-title="path.PlatformPath">path</span> <span class="keyword">from</span> <span class="string">&#039;path&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="367" data-toggle="tooltip" data-title="typeof cfg">cfg</span> <span class="keyword">from</span> <span class="string">&#039;./config&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="399" data-toggle="tooltip" data-title="typeof log">log</span> <span class="keyword">from</span> <span class="string">&#039;./logging&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="432" data-toggle="tooltip" data-title="typeof bak">bak</span> <span class="keyword">from</span> <span class="string">&#039;./backend&#039;</span>
</code></pre>
</details>
<h2 id="tracking-open-pages">Tracking Open Pages</h2>
<p>We track opened pages with the Client objects. When the serve mode is on,
outputted pages are augmented with a snippet of JS code that connects to the
server side events. That enables us to track which pages are open and send
events to them when output files change.</p>
<p>Each client is given an unique id that allows us to dispose it when the
SSE connection is closed. The connection keeps open until client closes it.
To send new data to the client, we also store the Response object.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">interface</span> <span id="458" class="typename" data-toggle="tooltip" data-title="Client">Client</span> <span class="punctuation">{</span>
    <span id="1035" data-toggle="tooltip" data-title="number">id</span><span class="punctuation">:</span> <span class="keyword">number</span>
    <span id="1050" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">response</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.ServerResponse&lt;Request&gt;">ServerResponse</span>
<span class="punctuation">}</span>
<span class="keyword">let</span> <span id="1090" data-toggle="tooltip" data-title="Client[]">clients</span><span class="punctuation">:</span> <a href="server.html#458"><span class="typename" data-toggle="tooltip" data-title="Client">Client</span></a><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span>
<span class="keyword">let</span> <span id="1117" data-toggle="tooltip" data-title="number">lastId</span> <span class="punctuation">=</span> <span class="number">0</span>
</code></pre>
<h2 id="start-server">Start Server</h2>
<p>Server configuration is dead simple. We create an express app and make it
serve static pages from the output directory. The other endpoint we set up
is the event stream under the <code>/litscript</code> route.</p>
<p>Optionally, a backend module can implement custom server-side logic or API
endpoints. If a backend is defined, requests are routed through
it before serving static files, allowing you to extend the server with
custom endpoints. If the backend handles the request, it should <code>end</code> the
response.</p>
<p>Finally, we get the host and port from the config and start listening to it.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="1128" class="member" data-toggle="tooltip" data-title="(opts: cfg.Options) =&gt; void">start</span><span class="punctuation">(</span><span id="1788" data-toggle="tooltip" data-title="cfg.Options">opts</span><span class="punctuation">:</span> <a href="server.html#367"><span data-toggle="tooltip" data-title="any">cfg</span></a><span class="punctuation">.</span><a href="config.html#2260"><span class="typename" data-toggle="tooltip" data-title="cfg.Options">Options</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">const</span> <span id="1818" data-toggle="tooltip" data-title="http.Server&lt;typeof http.IncomingMessage, typeof http.ServerResponse&gt;">server</span> <span class="punctuation">=</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="typeof http">http</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ &lt;Request extends typeof http.IncomingMessage = typeof http.IncomingMessage, Response extends typeof http.ServerResponse = typeof http.ServerResponse&gt;(requestListener?: http.RequestListener&lt;Request, Response&gt;): http.Server&lt;Request, Response&gt;; &lt;Request extends typeof http.IncomingMessage = typeof http.IncomingMessag...">createServer</span><span class="punctuation">(</span><span class="punctuation">(</span><span id="1847" data-toggle="tooltip" data-title="http.IncomingMessage">req</span><span class="punctuation">,</span> <span id="1851" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt; &amp; { req: http.IncomingMessage; }">res</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
        <span class="comment">// SSE handler</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="server.html#1847"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">url</span> <span class="punctuation">==</span> <span class="string">&#039;/litscript&#039;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            <a href="server.html#5517"><span class="member" data-toggle="tooltip" data-title="(request: http.IncomingMessage, response: http.ServerResponse) =&gt; void">notifyHandler</span></a><span class="punctuation">(</span><a href="server.html#1847"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">,</span> <a href="server.html#1851"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt; &amp; { req: http.IncomingMessage; }">res</span></a><span class="punctuation">)</span>
            <span class="keyword">return</span>
        <span class="punctuation">}</span>
        <span class="comment">// Backend handler (if defined)</span>
        <a href="server.html#432"><span data-toggle="tooltip" data-title="typeof bak">bak</span></a><span class="punctuation">.</span><a href="backend.html#1383"><span class="member" data-toggle="tooltip" data-title="(req: http.IncomingMessage, res: http.ServerResponse) =&gt; Promise&lt;void&gt;">backend</span></a><span class="punctuation">(</span><a href="server.html#1847"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">,</span> <a href="server.html#1851"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt; &amp; { req: http.IncomingMessage; }">res</span></a><span class="punctuation">)</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="&lt;TResult1 = void, TResult2 = never&gt;(onfulfilled?: (value: void) =&gt; TResult1 | PromiseLike&lt;TResult1&gt;, onrejected?: (reason: any) =&gt; TResult2 | PromiseLike&lt;TResult2&gt;) =&gt; Promise&lt;...&gt;">then</span><span class="punctuation">(</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
            <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="server.html#1851"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt; &amp; { req: http.IncomingMessage; }">res</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="boolean">writableEnded</span><span class="punctuation">)</span>
                <a href="server.html#2376"><span class="member" data-toggle="tooltip" data-title="(req: http.IncomingMessage, opts: cfg.Options, res: http.ServerResponse&lt;http.IncomingMessage&gt;) =&gt; void">serveStatic</span></a><span class="punctuation">(</span><a href="server.html#1847"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">,</span> <a href="server.html#1788"><span data-toggle="tooltip" data-title="cfg.Options">opts</span></a><span class="punctuation">,</span> <a href="server.html#1851"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt; &amp; { req: http.IncomingMessage; }">res</span></a><span class="punctuation">)</span> 
        <span class="punctuation">}</span><span class="punctuation">)</span>
    <span class="punctuation">}</span><span class="punctuation">)</span>
    <span class="keyword">let</span> <span class="punctuation">{</span> <span id="2180" data-toggle="tooltip" data-title="string">host</span><span class="punctuation">,</span> <span id="2186" data-toggle="tooltip" data-title="number">port</span> <span class="punctuation">}</span> <span class="punctuation">=</span> <a href="server.html#1788"><span data-toggle="tooltip" data-title="cfg.Options">opts</span></a><span class="punctuation">.</span><a href="config.html#6746"><span data-toggle="tooltip" data-title="cfg.ServeOptions">serveOptions</span></a>
    <a href="server.html#1818"><span data-toggle="tooltip" data-title="http.Server&lt;typeof http.IncomingMessage, typeof http.ServerResponse&gt;">server</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (port?: number, hostname?: string, backlog?: number, listeningListener?: () =&gt; void): http.Server&lt;typeof http.IncomingMessage, typeof http.ServerResponse&gt;; (port?: number, hostname?: string, listeningListener?: () =&gt; void): http.Server&lt;...&gt;; (port?: number, backlog?: number, listeningListener?: () =&gt; void): http.S...">listen</span><span class="punctuation">(</span><a href="server.html#2186"><span data-toggle="tooltip" data-title="number">port</span></a><span class="punctuation">,</span> <a href="server.html#2180"><span data-toggle="tooltip" data-title="string">host</span></a><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span data-toggle="tooltip" data-title="Console">console</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (...data: any[]): void; (message?: any, ...optionalParams: any[]): void; }">log</span><span class="punctuation">(</span>
        <span class="string">`${</span><a href="server.html#399"><span data-toggle="tooltip" data-title="typeof log">log</span></a><span class="punctuation">.</span><a href="logging.html#336"><span class="typename" data-toggle="tooltip" data-title="typeof log.Colors">Colors</span></a><span class="punctuation">.</span><a href="logging.html#508"><span data-toggle="tooltip" data-title="log.Colors.Reset">Reset</span></a><span class="string">}Development server started at ${</span>
        <a href="server.html#399"><span data-toggle="tooltip" data-title="typeof log">log</span></a><span class="punctuation">.</span><a href="logging.html#336"><span class="typename" data-toggle="tooltip" data-title="typeof log.Colors">Colors</span></a><span class="punctuation">.</span><a href="logging.html#577"><span data-toggle="tooltip" data-title="log.Colors.Green">Green</span></a><span class="string">}http://${</span><a href="server.html#2180"><span data-toggle="tooltip" data-title="string">host</span></a><span class="string">}:${</span><a href="server.html#2186"><span data-toggle="tooltip" data-title="number">port</span></a><span class="string">}`</span><span class="punctuation">)</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="static-files">Static Files</h2>
<p>Serve a static file. Requests to <code>/</code> are mapped to <code>index.html</code> to serve the
main page.</p>
<p>If the deployment mode is production, we serve the gzipped CSS and JS files
generated by the bundler. We add a suffix <code>.gz</code> to the URL that is retrieved
and set response headers to tell the browser that the response stream is
compressed.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">function</span> <span id="2376" class="member" data-toggle="tooltip" data-title="(req: http.IncomingMessage, opts: cfg.Options, res: http.ServerResponse&lt;http.IncomingMessage&gt;) =&gt; void">serveStatic</span><span class="punctuation">(</span><span id="2780" data-toggle="tooltip" data-title="http.IncomingMessage">req</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.IncomingMessage">IncomingMessage</span><span class="punctuation">,</span> <span id="2806" data-toggle="tooltip" data-title="cfg.Options">opts</span><span class="punctuation">:</span> <a href="server.html#367"><span data-toggle="tooltip" data-title="any">cfg</span></a><span class="punctuation">.</span><a href="config.html#2260"><span class="typename" data-toggle="tooltip" data-title="cfg.Options">Options</span></a><span class="punctuation">,</span> 
    <span id="2825" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.ServerResponse&lt;Request&gt;">ServerResponse</span><span class="punctuation">&lt;</span><a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.IncomingMessage">IncomingMessage</span><span class="punctuation">&gt;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="2888" data-toggle="tooltip" data-title="URL">url</span> <span class="punctuation">=</span> <span class="typename" data-toggle="tooltip" data-title="{ new (url: string | URL, base?: string | URL): URL; prototype: URL; canParse(url: string | URL, base?: string | URL): boolean; createObjectURL(obj: Blob | MediaSource): string; parse(url: string | URL, base?: string | URL): URL | null; revokeObjectURL(url: string): void; }">URL</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(url: string | URL, base?: string | URL) =&gt; URL | null">parse</span><span class="punctuation">(</span><a href="server.html#2780"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">url</span> <span class="punctuation">||</span> <span class="string">&#039;/&#039;</span><span class="punctuation">,</span> <span class="string">`http://${</span><a href="server.html#2780"><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="http.IncomingHttpHeaders">headers</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">host</span><span class="string">}`</span><span class="punctuation">)</span>
    <span class="keyword">let</span> <span id="2958" data-toggle="tooltip" data-title="string">fileUrl</span> <span class="punctuation">=</span> <a href="server.html#2888"><span data-toggle="tooltip" data-title="URL">url</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">pathname</span> <span class="punctuation">==</span> <span class="string">&#039;/&#039;</span> <span class="punctuation">?</span> <span class="string">&#039;/index.html&#039;</span> <span class="punctuation">:</span> <a href="server.html#2888"><span data-toggle="tooltip" data-title="URL">url</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">pathname</span>
    <span class="keyword">let</span> <span id="3027" data-toggle="tooltip" data-title="string">filePath</span> <span class="punctuation">=</span> <a href="server.html#338"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...paths: string[]) =&gt; string">join</span><span class="punctuation">(</span><a href="server.html#2806"><span data-toggle="tooltip" data-title="cfg.Options">opts</span></a><span class="punctuation">.</span><a href="config.html#2713"><span data-toggle="tooltip" data-title="string">outDir</span></a><span class="punctuation">,</span> <span class="member" data-toggle="tooltip" data-title="(encodedURIComponent: string) =&gt; string">decodeURIComponent</span><span class="punctuation">(</span><a href="server.html#2958"><span data-toggle="tooltip" data-title="string">fileUrl</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
    <span class="keyword">let</span> <span id="3098" data-toggle="tooltip" data-title="string">ext</span> <span class="punctuation">=</span> <a href="server.html#338"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: string) =&gt; string">extname</span><span class="punctuation">(</span><a href="server.html#3027"><span data-toggle="tooltip" data-title="string">filePath</span></a><span class="punctuation">)</span>

    <span class="keyword">if</span> <span class="punctuation">(</span><a href="server.html#2806"><span data-toggle="tooltip" data-title="cfg.Options">opts</span></a><span class="punctuation">.</span><a href="config.html#6905"><span data-toggle="tooltip" data-title="cfg.DeployMode">deployMode</span></a> <span class="punctuation">==</span> <span class="string">&#039;prod&#039;</span> <span class="punctuation">&amp;&amp;</span> <span class="punctuation">(</span><a href="server.html#3098"><span data-toggle="tooltip" data-title="string">ext</span></a> <span class="punctuation">==</span> <span class="string">&#039;.css&#039;</span> <span class="punctuation">||</span> <a href="server.html#3098"><span data-toggle="tooltip" data-title="string">ext</span></a> <span class="punctuation">==</span> <span class="string">&#039;.js&#039;</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <a href="server.html#3027"><span data-toggle="tooltip" data-title="string">filePath</span></a> <span class="punctuation">+=</span> <span class="string">&#039;.gz&#039;</span>
        <a href="server.html#2825"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(name: string, value: number | string | readonly string[]) =&gt; http.ServerResponse&lt;http.IncomingMessage&gt;">setHeader</span><span class="punctuation">(</span><span class="string">&#039;Content-Encoding&#039;</span><span class="punctuation">,</span> <span class="string">&#039;gzip&#039;</span><span class="punctuation">)</span>
    <span class="punctuation">}</span>
    <a href="server.html#2825"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(name: string, value: number | string | readonly string[]) =&gt; http.ServerResponse&lt;http.IncomingMessage&gt;">setHeader</span><span class="punctuation">(</span><span class="string">&#039;Content-Type&#039;</span><span class="punctuation">,</span> <a href="server.html#3365"><span class="member" data-toggle="tooltip" data-title="(ext: string) =&gt; string">contentType</span></a><span class="punctuation">(</span><a href="server.html#3098"><span data-toggle="tooltip" data-title="string">ext</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
    <a href="server.html#4274"><span class="member" data-toggle="tooltip" data-title="(filePath: string, res: http.ServerResponse) =&gt; void">serveFile</span></a><span class="punctuation">(</span><a href="server.html#3027"><span data-toggle="tooltip" data-title="string">filePath</span></a><span class="punctuation">,</span> <a href="server.html#2825"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<p>This function maps common file extensions to their appropriate MIME types,
ensuring that browsers interpret and display files correctly. If the
extension is not recognized, it defaults to 'text/plain'.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">function</span> <span id="3365" class="member" data-toggle="tooltip" data-title="(ext: string) =&gt; string">contentType</span><span class="punctuation">(</span><span id="3607" data-toggle="tooltip" data-title="string">ext</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">{</span>
    <span class="keyword">switch</span> <span class="punctuation">(</span><a href="server.html#3607"><span data-toggle="tooltip" data-title="string">ext</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">case</span> <span class="string">&#039;.css&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;text/css; charset=UTF-8&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.js&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;application/javascript; charset=UTF-8&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.html&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span>  <span class="string">&#039;text/html; charset=UTF-8&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.jpg&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/jpeg&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.png&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/png&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.gif&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/gif&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.svg&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/svg+xml&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.ico&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/x-icon&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.webp&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;image/webp&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.woff&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;font/woff&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.woff2&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;font/woff2&#039;</span>
        <span class="keyword">case</span> <span class="string">&#039;.json&#039;</span><span class="punctuation">:</span>
        <span class="keyword">case</span> <span class="string">&#039;.map&#039;</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;application/json&#039;</span>
        <span class="keyword">default</span><span class="punctuation">:</span> <span class="keyword">return</span> <span class="string">&#039;text/plain&#039;</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<p>Check if a file exists and stream it to the response, if it does. Otherwise
return 404 as HTTP response. Also check if the file has been modified since
the last time it was requested. If it has not been modified, return 304.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">function</span> <span id="4274" class="member" data-toggle="tooltip" data-title="(filePath: string, res: http.ServerResponse) =&gt; void">serveFile</span><span class="punctuation">(</span><span id="4536" data-toggle="tooltip" data-title="string">filePath</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="4553" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.ServerResponse&lt;Request&gt;">ServerResponse</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <a href="server.html#313"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="typeof fs.stat">stat</span><span class="punctuation">(</span><a href="server.html#4536"><span data-toggle="tooltip" data-title="string">filePath</span></a><span class="punctuation">,</span> <span class="punctuation">(</span><span id="4605" data-toggle="tooltip" data-title="NodeJS.ErrnoException">err</span><span class="punctuation">,</span> <span id="4609" data-toggle="tooltip" data-title="fs.Stats">stats</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="server.html#4605"><span data-toggle="tooltip" data-title="NodeJS.ErrnoException">err</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
            <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (statusCode: number, statusMessage?: string, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;http.IncomingMessage&gt;; (statusCode: number, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;...&gt;; }">writeHead</span><span class="punctuation">(</span><span class="number">404</span><span class="punctuation">)</span>
            <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (cb?: () =&gt; void): http.ServerResponse&lt;http.IncomingMessage&gt;; (chunk: any, cb?: () =&gt; void): http.ServerResponse&lt;http.IncomingMessage&gt;; (chunk: any, encoding: BufferEncoding, cb?: () =&gt; void): http.ServerResponse&lt;...&gt;; }">end</span><span class="punctuation">(</span><span class="string">&#039;Not found&#039;</span><span class="punctuation">)</span>
            <span class="keyword">return</span>
        <span class="punctuation">}</span>
        <span class="keyword">const</span> <span id="4747" data-toggle="tooltip" data-title="string">ifModifiedSince</span> <span class="punctuation">=</span> <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="http.IncomingMessage">req</span><span class="punctuation">?.</span><span data-toggle="tooltip" data-title="http.IncomingHttpHeaders">headers</span><span class="punctuation">[</span><span class="string">&#039;if-modified-since&#039;</span><span class="punctuation">]</span>
        <span class="keyword">const</span> <span id="4817" data-toggle="tooltip" data-title="string">lastModified</span> <span class="punctuation">=</span> <a href="server.html#4609"><span data-toggle="tooltip" data-title="fs.Stats">stats</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="Date">mtime</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">toUTCString</span><span class="punctuation">(</span><span class="punctuation">)</span>
        <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(name: string, value: number | string | readonly string[]) =&gt; http.ServerResponse&lt;http.IncomingMessage&gt;">setHeader</span><span class="punctuation">(</span><span class="string">&#039;Last-Modified&#039;</span><span class="punctuation">,</span> <a href="server.html#4817"><span data-toggle="tooltip" data-title="string">lastModified</span></a><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="server.html#4747"><span data-toggle="tooltip" data-title="string">ifModifiedSince</span></a> <span class="punctuation">&amp;&amp;</span> 
            <span class="typename" data-toggle="tooltip" data-title="DateConstructor">Date</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(s: string) =&gt; number">parse</span><span class="punctuation">(</span><a href="server.html#4747"><span data-toggle="tooltip" data-title="string">ifModifiedSince</span></a><span class="punctuation">)</span> <span class="punctuation">&gt;=</span> <span class="typename" data-toggle="tooltip" data-title="DateConstructor">Date</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(s: string) =&gt; number">parse</span><span class="punctuation">(</span><a href="server.html#4817"><span data-toggle="tooltip" data-title="string">lastModified</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (statusCode: number, statusMessage?: string, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;http.IncomingMessage&gt;; (statusCode: number, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;...&gt;; }">writeHead</span><span class="punctuation">(</span><span class="number">304</span><span class="punctuation">)</span>
            <a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (cb?: () =&gt; void): http.ServerResponse&lt;http.IncomingMessage&gt;; (chunk: any, cb?: () =&gt; void): http.ServerResponse&lt;http.IncomingMessage&gt;; (chunk: any, encoding: BufferEncoding, cb?: () =&gt; void): http.ServerResponse&lt;...&gt;; }">end</span><span class="punctuation">(</span><span class="string">&quot;Not modified&quot;</span><span class="punctuation">)</span>
            <span class="keyword">return</span>
        <span class="punctuation">}</span>
        <span class="keyword">const</span> <span id="5124" data-toggle="tooltip" data-title="fs.ReadStream">stream</span> <span class="punctuation">=</span> <a href="server.html#313"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: fs.PathLike, options?: BufferEncoding | ReadStreamOptions) =&gt; fs.ReadStream">createReadStream</span><span class="punctuation">(</span><a href="server.html#4536"><span data-toggle="tooltip" data-title="string">filePath</span></a><span class="punctuation">)</span>
        <a href="server.html#5124"><span data-toggle="tooltip" data-title="fs.ReadStream">stream</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="&lt;T extends NodeJS.WritableStream&gt;(destination: T, options?: { end?: boolean | undefined; }) =&gt; T">pipe</span><span class="punctuation">(</span><a href="server.html#4553"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">res</span></a><span class="punctuation">)</span>
    <span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="notify-clients">Notify Clients</h2>
<p>When files change, we notify all connected clients about the changes.
We send each client a message that specifies which files have changed.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="5197" class="member" data-toggle="tooltip" data-title="(files: string[]) =&gt; void">notifyChanges</span><span class="punctuation">(</span><span id="5408" data-toggle="tooltip" data-title="string[]">files</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <a href="server.html#1090"><span data-toggle="tooltip" data-title="Client[]">clients</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(callbackfn: (value: Client, index: number, array: Client[]) =&gt; void, thisArg?: any) =&gt; void">forEach</span><span class="punctuation">(</span><span id="5447" data-toggle="tooltip" data-title="Client">c</span> <span class="punctuation">=&gt;</span>
        <a href="server.html#5447"><span data-toggle="tooltip" data-title="Client">c</span></a><span class="punctuation">.</span><a href="server.html#1050"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">response</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (chunk: any, callback?: (error: Error | null | undefined) =&gt; void): boolean; (chunk: any, encoding: BufferEncoding, callback?: (error: Error | null | undefined) =&gt; void): boolean; }">write</span><span class="punctuation">(</span><span class="string">`data: ${</span><span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (value: any, replacer?: (this: any, key: string, value: any) =&gt; any, space?: string | number): string; (value: any, replacer?: (number | string)[] | null, space?: string | number): string; }">stringify</span><span class="punctuation">(</span><a href="server.html#5408"><span data-toggle="tooltip" data-title="string[]">files</span></a><span class="punctuation">)</span><span class="string">}\n\n`</span><span class="punctuation">)</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<p>The handler for event stream returns headers and registers a new client.
Then it sets up a <code>close</code> event handler that removes the client when it
disconnects.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">function</span> <span id="5517" class="member" data-toggle="tooltip" data-title="(request: http.IncomingMessage, response: http.ServerResponse) =&gt; void">notifyHandler</span><span class="punctuation">(</span><span id="5717" data-toggle="tooltip" data-title="http.IncomingMessage">request</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.IncomingMessage">IncomingMessage</span><span class="punctuation">,</span> 
    <span id="5747" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">response</span><span class="punctuation">:</span> <a href="server.html#284"><span data-toggle="tooltip" data-title="any">http</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="http.ServerResponse&lt;Request&gt;">ServerResponse</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">const</span> <span id="5795" data-toggle="tooltip" data-title="{ &#039;Content-Type&#039;: string; Connection: string; &#039;Cache-Control&#039;: string; }">headers</span> <span class="punctuation">=</span> <span class="punctuation">{</span>
        <span class="string">&#039;Content-Type&#039;</span><span class="punctuation">:</span> <span class="string">&#039;text/event-stream&#039;</span><span class="punctuation">,</span>
        <span class="string">&#039;Connection&#039;</span><span class="punctuation">:</span> <span class="string">&#039;keep-alive&#039;</span><span class="punctuation">,</span>
        <span class="string">&#039;Cache-Control&#039;</span><span class="punctuation">:</span> <span class="string">&#039;no-cache&#039;</span>
    <span class="punctuation">}</span>
    <a href="server.html#5747"><span data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">response</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (statusCode: number, statusMessage?: string, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;http.IncomingMessage&gt;; (statusCode: number, headers?: http.OutgoingHttpHeaders | http.OutgoingHttpHeader[]): http.ServerResponse&lt;...&gt;; }">writeHead</span><span class="punctuation">(</span><span class="number">200</span><span class="punctuation">,</span> <a href="server.html#5795"><span data-toggle="tooltip" data-title="{ &#039;Content-Type&#039;: string; Connection: string; &#039;Cache-Control&#039;: string; }">headers</span></a><span class="punctuation">)</span>
    <span class="keyword">let</span> <span id="5975" data-toggle="tooltip" data-title="number">id</span> <span class="punctuation">=</span> <span class="punctuation">++</span><a href="server.html#1117"><span data-toggle="tooltip" data-title="number">lastId</span></a>
    <a href="server.html#1090"><span data-toggle="tooltip" data-title="Client[]">clients</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: Client[]) =&gt; number">push</span><span class="punctuation">(</span><span class="punctuation">{</span> <span id="6008" data-toggle="tooltip" data-title="number">id</span><span class="punctuation">,</span> <span id="6012" data-toggle="tooltip" data-title="http.ServerResponse&lt;http.IncomingMessage&gt;">response</span> <span class="punctuation">}</span><span class="punctuation">)</span>
    <a href="server.html#399"><span data-toggle="tooltip" data-title="typeof log">log</span></a><span class="punctuation">.</span><a href="logging.html#4994"><span class="member" data-toggle="tooltip" data-title="(output: string) =&gt; void">info</span></a><span class="punctuation">(</span><span class="string">`Client ${</span><a href="server.html#5975"><span data-toggle="tooltip" data-title="number">id</span></a><span class="string">} connected`</span><span class="punctuation">)</span>
    <a href="server.html#5717"><span data-toggle="tooltip" data-title="http.IncomingMessage">request</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (event: &quot;close&quot;, listener: () =&gt; void): http.IncomingMessage; (event: &quot;data&quot;, listener: (chunk: any) =&gt; void): http.IncomingMessage; (event: &quot;end&quot;, listener: () =&gt; void): http.IncomingMessage; (event: &quot;error&quot;, listener: (err: Error) =&gt; void): http.IncomingMessage; (event: &quot;pause&quot;, listener: () =&gt; void): http.Incom...">on</span><span class="punctuation">(</span><span class="string">&#039;close&#039;</span><span class="punctuation">,</span> <span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
        <a href="server.html#399"><span data-toggle="tooltip" data-title="typeof log">log</span></a><span class="punctuation">.</span><a href="logging.html#4994"><span class="member" data-toggle="tooltip" data-title="(output: string) =&gt; void">info</span></a><span class="punctuation">(</span><span class="string">`Client ${</span><a href="server.html#5975"><span data-toggle="tooltip" data-title="number">id</span></a><span class="string">} disconnected.`</span><span class="punctuation">)</span>
        <a href="server.html#1090"><span data-toggle="tooltip" data-title="Client[]">clients</span></a> <span class="punctuation">=</span> <a href="server.html#1090"><span data-toggle="tooltip" data-title="Client[]">clients</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ &lt;S extends Client&gt;(predicate: (value: Client, index: number, array: Client[]) =&gt; value is S, thisArg?: any): S[]; (predicate: (value: Client, index: number, array: Client[]) =&gt; unknown, thisArg?: any): Client[]; }">filter</span><span class="punctuation">(</span><span id="6176" data-toggle="tooltip" data-title="Client">c</span> <span class="punctuation">=&gt;</span> <a href="server.html#6176"><span data-toggle="tooltip" data-title="Client">c</span></a><span class="punctuation">.</span><a href="server.html#1035"><span data-toggle="tooltip" data-title="number">id</span></a> <span class="punctuation">!=</span> <a href="server.html#5975"><span data-toggle="tooltip" data-title="number">id</span></a><span class="punctuation">)</span>
    <span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>

        </div>
            <div class="sidepane narrow-scrollbars">
                
        <div class="pagemenu">
            <h3>On This Page</h3>
                <ul class="pagetree">
                </ul>
        </div>
            </div>
        </div>
        
        <div class="footer">
            <a class="footer-button" href="bundler.html">
            <p>Previous</p>
            <p>Â« Bundler</p>
        </a>
            <div class="footer-text">
                <p>Copyright Â© 2024 Tommi Johtela</p>
                <p>Generated by 
                    <a href="https://johtela.github.io/litscript">LiTScript</a>
                </p>
            </div>
            <a class="footer-button" href="backend.html">
            <p>Next</p>
            <p>Backend Modules Â»</p>
        </a>
        </div>
    
        <script src="../dist/normal.js"></script>
    </body>
    </html>