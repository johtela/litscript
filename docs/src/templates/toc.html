
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>
            LiTScript - Table of Contents
        </title>
        <link rel="icon" type="image/icon" href="../../images/favicon.png" />
        <link rel="stylesheet" href="../../dist/normal.css" />
        
    </head>
    <body data-syntax-highlight="son-of-obsidian">
        
        <div id="navbar">
            
    <div class="navmenu ">
        
    <div class="navitem " >
        <a class="title enabled" href="../../index.html" >
            <img src="../../images/bulb.svg" />
            <span>LiTScript</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://www.npmjs.com/package/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-npm" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M1 8h22v7h-12v2h-4v-2h-6z" />
            <path d="M7 8v7" />
            <path d="M14 8v7" />
            <path d="M17 11v4" />
            <path d="M4 11v4" />
            <path d="M11 11v1" />
            <path d="M20 11v4" />
        </svg>
            <span>Download</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://github.com/johtela/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
        </svg>
            <span>GitHub</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="../../license.html" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-license" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M15 21h-9a3 3 0 0 1 -3 -3v-1h10v2a2 2 0 0 0 4 0v-14a2 2 0 1 1 2 2h-2m2 -4h-11a3 3 0 0 0 -3 3v11" />
            <path d="M9 7l4 0" />
            <path d="M9 11l4 0" />
        </svg>
            <span>License</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Syntax Highlight</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="coding-horror">
        <a   onclick="document.body.syntaxHighlight('coding-horror')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Coding Horror</span>
        </a>
        
    </div>
    <div class="navitem " id="monokai">
        <a   onclick="document.body.syntaxHighlight('monokai')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Monokai</span>
        </a>
        
    </div>
    <div class="navitem " id="solarized-light">
        <a   onclick="document.body.syntaxHighlight('solarized-light')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Solarized Light</span>
        </a>
        
    </div>
    <div class="navitem active" id="son-of-obsidian">
        <a   onclick="document.body.syntaxHighlight('son-of-obsidian')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Son of Obsidian</span>
        </a>
        
    </div>
    </div>
    </div>
    </div>
            
    <a class="hamburger">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </a>
        </div>
        
        <div class="layout">
            <div class="sidepane narrow-scrollbars">
                
        <div class="tocmenu">
            <h3>Table of Contents</h3>
            
    <ul>
        
    <li>
        
        <a href="../../index.html"><span>üè†</span><span data-toggle="tooltip" data-title="Home page">
            Home
        </span></a>
        
    </li>
    <li>
        
        <a href="../../introduction.html"><span>ü§ù</span><span data-toggle="tooltip" data-title="Introduction and Motivation">
            Introduction
        </span></a>
        
    </li>
    <li>
        
        <a href="../config.html"><span>üéõÔ∏è</span><span data-toggle="tooltip" data-title="Configuration options and command line parsing">
            Configuration
        </span></a>
        
    </li>
    <li>
        
        <a href="toc.html" class="highlight"><span>üìñ</span>Table of Contents</a>
        
    </li>
    <li>
        
        <a href="front-matter.html"><span>üìã</span>Front Matter</a>
        
    </li>
    <li>
        
        <a href="../region.html"><span>üåç</span><span data-toggle="tooltip" data-title="Embedding Regions of Code in Markdown">
            Regions
        </span></a>
        
    </li>
    <li>
        
        <a href="../dependency-graph.html"><span>üï∏Ô∏è</span><span data-toggle="tooltip" data-title="Creating module dependency graph">
            Dependency Graph
        </span></a>
        
    </li>
    <li>
        
        <a href="../bundler.html"><span>üì¶</span><span data-toggle="tooltip" data-title="Packing JS & CSS files">
            Bundler
        </span></a>
        
    </li>
    <li>
        <div class="accordion">
        Site Templates
        </div>
            
    <ul>
        
    <li>
        
        <a href="html.html"><span>üìê</span>HTML Templates</a>
        
    </li>
    <li>
        
        <a href="../utils.html"><span>üõ†Ô∏è</span>Utilities</a>
        
    </li>
    <li>
        
        <a href="template.html"><span>üì∞</span>Page Templates</a>
        
    </li>
    <li>
        <div class="accordion">
        Default Template
        </div>
            
    <ul>
        
    <li>
        
        <a href="../../site/pages/normal/index.html"><span>üêò</span>Normal Page</a>
        
    </li>
    <li>
        
        <a href="../../site/styles/theme.html"><span>üé®</span>Theming</a>
        
    </li>
    </ul>
    </li>
    </ul>
    </li>
    <li>
        <div class="accordion">
        Implementation
        </div>
            
    <ul>
        
    <li>
        
        <a href="../index.html"><span>üì∫</span><span data-toggle="tooltip" data-title="Main program and exports">
            Main Program
        </span></a>
        
    </li>
    <li>
        
        <a href="../cli.html"><span>üêö</span><span data-toggle="tooltip" data-title="Scaffolding functionality">
            Command Line Interface
        </span></a>
        
    </li>
    <li>
        
        <a href="../weaver.html"><span>üï∑Ô∏è</span><span data-toggle="tooltip" data-title="Common code for documentation generation">
            Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="../md-weaver.html"><span>‚úçÔ∏è</span><span data-toggle="tooltip" data-title="Markdown generation code">
            Markdown Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="../html-weaver.html"><span>üîó</span><span data-toggle="tooltip" data-title="HTML generation code">
            HTML Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="../block-list.html"><span>üß±</span><span data-toggle="tooltip" data-title="Data structure for code/markdown fragments">
            Source Blocks
        </span></a>
        
    </li>
    <li>
        <div class="accordion">
        Translators
        </div>
            
    <ul>
        
    <li>
        
        <a href="../translators/translators.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Registering and getting translators">
            Translating Input Files
        </span></a>
        
    </li>
    <li>
        
        <a href="../translators/base-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Base class and other types related to translators">
            Translator Base Class
        </span></a>
        
    </li>
    <li>
        
        <a href="../translators/md-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translator for markdown files">
            Markdown Translator
        </span></a>
        
    </li>
    <li>
        
        <a href="../translators/ts-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Common code for TypeScript translator">
            TypeScript Translator
        </span></a>
        
    </li>
    <li>
        
        <a href="../translators/ts-html-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translating TypeScript to HTML">
            TypeScript Translator for HTML Output
        </span></a>
        
    </li>
    <li>
        
        <a href="../translators/jsdoc-translator.html"><span>üó£Ô∏è</span>Generic JSDoc Translator</a>
        
    </li>
    </ul>
    </li>
    <li>
        
        <a href="../logging.html"><span>üìí</span><span data-toggle="tooltip" data-title="Outputting errors and progress to console">
            Logging
        </span></a>
        
    </li>
    </ul>
    </li>
    <li>
        
        <a href="../../license.html"><span>üìú</span><span data-toggle="tooltip" data-title="License and usage information">
            License
        </span></a>
        
    </li>
    </ul>
        </div>
                <div class="toc-button"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M7 7l5 5l-5 5" />
            <path d="M13 7l5 5l-5 5" />
        </svg></div>
            </div>
            
        <div class="contentarea closepopups">
            <h1 id="table-of-contents">Table of Contents</h1>
<p>The data structure for table of contents or <em>TOC</em> is defined here. Also
functions for loading and saving it.</p>
<details>
<summary>toc.ts imports</summary>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="191" data-toggle="tooltip" data-title="typeof fs">fs</span> <span class="keyword">from</span> <span class="string">&#039;fs&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="217" data-toggle="tooltip" data-title="path.PlatformPath">path</span> <span class="keyword">from</span> <span class="string">&#039;path&#039;</span>
</code></pre>
</details>
<h2 id="data-structure">Data Structure</h2>
<p>The structure of the TOC is recursive, but simple. A TOC consists of entries
which contain information about single page. An entry might contain
sub-entries which share the TOC structure.</p>
<p>An entry contains the following information:</p>
<ul>
<li><code>page</code> contains the title of the page.</li>
<li><code>file</code> is the relative path to the HTML page without the leading <code>/</code>
character.</li>
<li><code>desc</code> is an optional, longer description for the page.</li>
<li><code>subs</code> contains the sub-entries.</li>
</ul>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">type</span> <span id="239" class="typename" data-toggle="tooltip" data-title="Toc">Toc</span> <span class="punctuation">=</span> <a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a><span class="punctuation">[</span><span class="punctuation">]</span>
<span class="keyword">export</span> <span class="keyword">interface</span> <span id="814" class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span> <span class="punctuation">{</span>
    <span id="843" data-toggle="tooltip" data-title="string">page</span><span class="punctuation">:</span> <span class="keyword">string</span>
    <span id="861" data-toggle="tooltip" data-title="string">file</span><span class="punctuation">:</span> <span class="keyword">string</span>
    <span id="879" data-toggle="tooltip" data-title="string">desc</span><span class="punctuation">:</span> <span class="keyword">string</span>
    <span id="897" data-toggle="tooltip" data-title="string">bullet</span><span class="punctuation">?</span><span class="punctuation">:</span> <span class="keyword">string</span>
    <span id="918" data-toggle="tooltip" data-title="Toc">subs</span><span class="punctuation">?</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a>
<span class="punctuation">}</span>
</code></pre>
<h2 id="loading-toc">Loading TOC</h2>
<p>The function that loads TOC from file is defined below. It checks if the
given file exists. If not, it returns an empty TOC. Otherwise it parses the
content to the data structure. Any errors in the data will cause exceptions.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="937" class="member" data-toggle="tooltip" data-title="(tocFile: string) =&gt; Toc">loadToc</span><span class="punctuation">(</span><span id="1235" data-toggle="tooltip" data-title="string">tocFile</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="toc.html#191"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: fs.PathLike) =&gt; boolean">existsSync</span><span class="punctuation">(</span><a href="toc.html#1235"><span data-toggle="tooltip" data-title="string">tocFile</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
        <span class="keyword">return</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">try</span> <span class="punctuation">{</span>
        <span class="keyword">return</span> <span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(text: string, reviver?: (this: any, key: string, value: any) =&gt; any) =&gt; any">parse</span><span class="punctuation">(</span><a href="toc.html#191"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (path: fs.PathOrFileDescriptor, options?: { encoding?: null; flag?: string; }): Buffer; (path: fs.PathOrFileDescriptor, options: BufferEncoding | { encoding: BufferEncoding; flag?: string; }): string; (path: fs.PathOrFileDescriptor, options?: BufferEncoding | (fs.ObjectEncodingOptions &amp; { ...; })): string | Buffer...">readFileSync</span><span class="punctuation">(</span><a href="toc.html#1235"><span data-toggle="tooltip" data-title="string">tocFile</span></a><span class="punctuation">,</span> <span class="string">&#039;utf-8&#039;</span><span class="punctuation">)</span><span class="punctuation">)</span>
    <span class="punctuation">}</span>
    <span class="keyword">catch</span> <span class="punctuation">(</span><span id="1405" data-toggle="tooltip" data-title="any">e</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">throw</span> <a href="toc.html#1405"><span data-toggle="tooltip" data-title="any">e</span></a> <span class="keyword">instanceof</span> <span class="typename" data-toggle="tooltip" data-title="SyntaxErrorConstructor">SyntaxError</span> <span class="punctuation">?</span>
            <span class="typename" data-toggle="tooltip" data-title="ErrorConstructor">Error</span><span class="punctuation">(</span><span class="string">&quot;Could not parse TOC. Error: \n&quot;</span> <span class="punctuation">+</span>
                <a href="toc.html#1405"><span data-toggle="tooltip" data-title="SyntaxError">e</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">message</span><span class="punctuation">)</span> <span class="punctuation">:</span> <a href="toc.html#1405"><span data-toggle="tooltip" data-title="any">e</span></a>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="saving-toc">Saving TOC</h2>
<p>Saving TOC just serializes the data structure to string and saves it to the
file specified.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="1547" class="member" data-toggle="tooltip" data-title="(toc: Toc, tocFile: string) =&gt; void">saveToc</span><span class="punctuation">(</span><span id="1706" data-toggle="tooltip" data-title="Toc">toc</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">,</span> <span id="1715" data-toggle="tooltip" data-title="string">tocFile</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <a href="toc.html#191"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(file: fs.PathOrFileDescriptor, data: string | NodeJS.ArrayBufferView, options?: fs.WriteFileOptions) =&gt; void">writeFileSync</span><span class="punctuation">(</span><a href="toc.html#1715"><span data-toggle="tooltip" data-title="string">tocFile</span></a><span class="punctuation">,</span> <span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (value: any, replacer?: (this: any, key: string, value: any) =&gt; any, space?: string | number): string; (value: any, replacer?: (string | number)[], space?: string | number): string; }">stringify</span><span class="punctuation">(</span><a href="toc.html#1706"><span data-toggle="tooltip" data-title="Toc">toc</span></a><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">,</span> <span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="iterating-the-entries">Iterating the Entries</h2>
<p>Since TOC structure is recursive, it needs to be flattened, if you need to
iterate throuhg all the entries. The following generator does that.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span><span class="punctuation">*</span> <span id="1798" class="member" data-toggle="tooltip" data-title="(entries: Toc) =&gt; Iterable&lt;TocEntry&gt;">iterateTocEntries</span><span class="punctuation">(</span><span id="2030" data-toggle="tooltip" data-title="Toc">entries</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="Iterable&lt;T&gt;">Iterable</span><span class="punctuation">&lt;</span><a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="2079" data-toggle="tooltip" data-title="number">i</span> <span class="punctuation">=</span> <span class="number">0</span><span class="punctuation">;</span> <a href="toc.html#2079"><span data-toggle="tooltip" data-title="number">i</span></a> <span class="punctuation">&lt;</span> <a href="toc.html#2030"><span data-toggle="tooltip" data-title="Toc">entries</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">;</span> <span class="punctuation">++</span><a href="toc.html#2079"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="2126" data-toggle="tooltip" data-title="TocEntry">entry</span> <span class="punctuation">=</span> <a href="toc.html#2030"><span data-toggle="tooltip" data-title="Toc">entries</span></a><span class="punctuation">[</span><a href="toc.html#2079"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">]</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="toc.html#2126"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#861"><span data-toggle="tooltip" data-title="string">file</span></a><span class="punctuation">)</span>
            <span class="keyword">yield</span> <a href="toc.html#2030"><span data-toggle="tooltip" data-title="Toc">entries</span></a><span class="punctuation">[</span><a href="toc.html#2079"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">]</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="toc.html#2126"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#918"><span data-toggle="tooltip" data-title="Toc">subs</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
            <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="2249" data-toggle="tooltip" data-title="TocEntry">subEntry</span> <span class="keyword">of</span> <a href="toc.html#1798"><span class="member" data-toggle="tooltip" data-title="(entries: Toc) =&gt; Iterable&lt;TocEntry&gt;">iterateTocEntries</span></a><span class="punctuation">(</span><a href="toc.html#2126"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#918"><span data-toggle="tooltip" data-title="Toc">subs</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
                <span class="keyword">yield</span> <a href="toc.html#2249"><span data-toggle="tooltip" data-title="TocEntry">subEntry</span></a>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="finding-an-entry">Finding an Entry</h2>
<p>To find a specific page in the TOC, we iterate through the flattened entries
until we find the given file.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="2345" class="member" data-toggle="tooltip" data-title="(entries: Toc, file: string) =&gt; TocEntry">findTocEntryForFile</span><span class="punctuation">(</span><span id="2537" data-toggle="tooltip" data-title="Toc">entries</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">,</span> <span id="2550" data-toggle="tooltip" data-title="string">file</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a> <span class="punctuation">{</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="2590" data-toggle="tooltip" data-title="TocEntry">entry</span> <span class="keyword">of</span> <a href="toc.html#1798"><span class="member" data-toggle="tooltip" data-title="(entries: Toc) =&gt; Iterable&lt;TocEntry&gt;">iterateTocEntries</span></a><span class="punctuation">(</span><a href="toc.html#2537"><span data-toggle="tooltip" data-title="Toc">entries</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="toc.html#2590"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#861"><span data-toggle="tooltip" data-title="string">file</span></a> <span class="punctuation">==</span> <a href="toc.html#2550"><span data-toggle="tooltip" data-title="string">file</span></a><span class="punctuation">)</span>
            <span class="keyword">return</span> <a href="toc.html#2590"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a>
    <span class="keyword">return</span> <span class="keyword">null</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="find-previous-and-next-entry">Find Previous and Next Entry</h2>
<p>Navigation buttons need the reference to the previous and next page of the
given entry. This function also traverses through the flattened list, but
keeps the previous entry in a variable, in case the next one is the one we
are searching for.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="2706" class="member" data-toggle="tooltip" data-title="(entries: Toc, file: string) =&gt; [    TocEntry,    TocEntry]">findPreviousAndNextTocEntries</span><span class="punctuation">(</span><span id="3065" data-toggle="tooltip" data-title="Toc">entries</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">,</span> <span id="3078" data-toggle="tooltip" data-title="string">file</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span>
    <span class="punctuation">[</span><a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a><span class="punctuation">,</span> <a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a><span class="punctuation">]</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="3130" data-toggle="tooltip" data-title="TocEntry">prev</span><span class="punctuation">:</span> <a href="toc.html#814"><span class="typename" data-toggle="tooltip" data-title="TocEntry">TocEntry</span></a> <span class="punctuation">=</span> <span class="keyword">null</span>
    <span class="keyword">let</span> <span id="3161" data-toggle="tooltip" data-title="boolean">found</span> <span class="punctuation">=</span> <span class="keyword">false</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="3189" data-toggle="tooltip" data-title="TocEntry">entry</span> <span class="keyword">of</span> <a href="toc.html#1798"><span class="member" data-toggle="tooltip" data-title="(entries: Toc) =&gt; Iterable&lt;TocEntry&gt;">iterateTocEntries</span></a><span class="punctuation">(</span><a href="toc.html#3065"><span data-toggle="tooltip" data-title="Toc">entries</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="toc.html#3161"><span data-toggle="tooltip" data-title="boolean">found</span></a><span class="punctuation">)</span>
            <span class="keyword">return</span> <span class="punctuation">[</span><a href="toc.html#3130"><span data-toggle="tooltip" data-title="TocEntry">prev</span></a><span class="punctuation">,</span> <a href="toc.html#3189"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">]</span>
        <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><a href="toc.html#3189"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#861"><span data-toggle="tooltip" data-title="string">file</span></a> <span class="punctuation">==</span> <a href="toc.html#3078"><span data-toggle="tooltip" data-title="string">file</span></a><span class="punctuation">)</span>
            <a href="toc.html#3161"><span data-toggle="tooltip" data-title="boolean">found</span></a> <span class="punctuation">=</span> <span class="keyword">true</span>
        <span class="keyword">else</span>
            <a href="toc.html#3130"><span data-toggle="tooltip" data-title="TocEntry">prev</span></a> <span class="punctuation">=</span> <a href="toc.html#3189"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a>
    <span class="keyword">return</span> <span class="punctuation">[</span><a href="toc.html#3130"><span data-toggle="tooltip" data-title="TocEntry">prev</span></a><span class="punctuation">,</span> <span class="keyword">null</span><span class="punctuation">]</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="adding-new-entry">Adding New Entry</h2>
<p>Adding a new entry is done simply by pushing it at the end of the top-level
TOC. The user can manually relocate it later.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="3412" class="member" data-toggle="tooltip" data-title="(toc: Toc, page: string, file: string) =&gt; void">addTocEntry</span><span class="punctuation">(</span><span id="3611" data-toggle="tooltip" data-title="Toc">toc</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">,</span> <span id="3620" data-toggle="tooltip" data-title="string">page</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="3634" data-toggle="tooltip" data-title="string">file</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="toc.html#2345"><span class="member" data-toggle="tooltip" data-title="(entries: Toc, file: string) =&gt; TocEntry">findTocEntryForFile</span></a><span class="punctuation">(</span><a href="toc.html#3611"><span data-toggle="tooltip" data-title="Toc">toc</span></a><span class="punctuation">,</span> <a href="toc.html#3634"><span data-toggle="tooltip" data-title="string">file</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
        <a href="toc.html#3611"><span data-toggle="tooltip" data-title="Toc">toc</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: TocEntry[]) =&gt; number">push</span><span class="punctuation">(</span><span class="punctuation">{</span> <span id="3712" data-toggle="tooltip" data-title="string">page</span><span class="punctuation">,</span> <span id="3718" data-toggle="tooltip" data-title="string">file</span><span class="punctuation">,</span> <span id="3724" data-toggle="tooltip" data-title="string">desc</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span> <span class="punctuation">}</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="page-title">Page Title</h2>
<p>The title of a HTML page is retrieved also from TOC.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="3739" class="member" data-toggle="tooltip" data-title="(toc: Toc, relFileName: string) =&gt; string">pageTitle</span><span class="punctuation">(</span><span id="3858" data-toggle="tooltip" data-title="Toc">toc</span><span class="punctuation">:</span> <a href="toc.html#239"><span class="typename" data-toggle="tooltip" data-title="Toc">Toc</span></a><span class="punctuation">,</span> <span id="3867" data-toggle="tooltip" data-title="string">relFileName</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="3907" data-toggle="tooltip" data-title="TocEntry">entry</span> <span class="punctuation">=</span> <a href="toc.html#2345"><span class="member" data-toggle="tooltip" data-title="(entries: Toc, file: string) =&gt; TocEntry">findTocEntryForFile</span></a><span class="punctuation">(</span><a href="toc.html#3858"><span data-toggle="tooltip" data-title="Toc">toc</span></a><span class="punctuation">,</span> <a href="toc.html#3867"><span data-toggle="tooltip" data-title="string">relFileName</span></a><span class="punctuation">)</span>
    <span class="keyword">return</span> <a href="toc.html#3907"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a> <span class="punctuation">?</span> <span class="string">&quot; - &quot;</span> <span class="punctuation">+</span> <a href="toc.html#3907"><span data-toggle="tooltip" data-title="TocEntry">entry</span></a><span class="punctuation">.</span><a href="toc.html#843"><span data-toggle="tooltip" data-title="string">page</span></a> <span class="punctuation">:</span> <span class="string">&quot;&quot;</span>
<span class="punctuation">}</span>
</code></pre>

        </div>
            <div class="sidepane narrow-scrollbars">
                
        <div class="pagemenu">
            <h3>On This Page</h3>
                <ul class="pagetree">
                </ul>
        </div>
            </div>
        </div>
        
        <div class="footer">
            <a class="footer-button" href="../config.html">
            <p>Previous</p>
            <p>¬´ Configuration</p>
        </a>
            <div class="footer-text">
                <p>Copyright ¬© 2023 Tommi Johtela</p>
                <p>Generated by 
                    <a href="https://johtela.github.io/litscript">LiTScript</a>
                </p>
            </div>
            <a class="footer-button" href="front-matter.html">
            <p>Next</p>
            <p>Front Matter ¬ª</p>
        </a>
        </div>
    
        <script src="../../dist/normal.js"></script>

    <script>
    new EventSource('/esbuild').addEventListener('change', e => {
        let { added, removed, updated } = JSON.parse(e.data)
      
        updated = updated.filter(f => !f.endsWith(".map"))
        if (added.length == 0 && removed.length == 0 && updated.length === 1) {
          for (const link of document.getElementsByTagName("link")) {
            const url = new URL(link.href)
      
            if (url.host === location.host && url.pathname === updated[0]) {
              const next = link.cloneNode()
              next.href = updated[0] + '?' + Math.random().toString(36).slice(2)
              next.onload = () => link.remove()
              link.parentNode.insertBefore(next, link.nextSibling)
              return
            }
          }
        }
        location.reload()
      })
    </script>
    </body>
    </html>