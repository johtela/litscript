
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>
            LiTScript - Configuration
        </title>
        <link rel="icon" type="image/icon" href="../images/favicon.png" />
        <link rel="stylesheet" href="../dist/normal.css" />
        
    </head>
    <body>
        
        <div id="navbar">
            
    <div class="navmenu">
        
    <div class="navitem">
        <a class="title enabled" href="../index.html" >
            <img src="../images/bulb.svg" />
            <span>LiTScript</span>
        </a>
        
    </div>
    <div class="navitem">
        <a class="enabled" href="https://www.npmjs.com/package/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-npm" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M1 8h22v7h-12v2h-4v-2h-6z" />
            <path d="M7 8v7" />
            <path d="M14 8v7" />
            <path d="M17 11v4" />
            <path d="M4 11v4" />
            <path d="M11 11v1" />
            <path d="M20 11v4" />
        </svg>
            <span>Download</span>
        </a>
        
    </div>
    <div class="navitem">
        <a class="enabled" href="https://github.com/johtela/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
        </svg>
            <span>GitHub</span>
        </a>
        
    </div>
    <div class="navitem">
        <a class="enabled" href="../license.html" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-license" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M15 21h-9a3 3 0 0 1 -3 -3v-1h10v2a2 2 0 0 0 4 0v-14a2 2 0 1 1 2 2h-2m2 -4h-11a3 3 0 0 0 -3 3v11" />
            <path d="M9 7l4 0" />
            <path d="M9 11l4 0" />
        </svg>
            <span>License</span>
        </a>
        
    </div>
    <div class="navitem">
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Syntax Highlight</span>
        </a>
        
    <div class="navmenu">
        
    <div class="navitem">
        <a   onclick="window.syntaxHighlight('coding-horror')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Coding Horror</span>
        </a>
        
    </div>
    <div class="navitem">
        <a   onclick="window.syntaxHighlight('monokai')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Monokai</span>
        </a>
        
    </div>
    <div class="navitem">
        <a   onclick="window.syntaxHighlight('solarized-light')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Solarized Light</span>
        </a>
        
    </div>
    <div class="navitem">
        <a   onclick="window.syntaxHighlight('son-of-obsidian')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Son of Obsidian</span>
        </a>
        
    </div>
    </div>
    </div>
    </div>
            
    <a class="hamburger">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </a>
        </div>
        
        <div class="layout">
            <div class="sidepane narrow-scrollbars">
                
        <div class="tocmenu">
            <h3>Table of Contents</h3>
            
    <ul>
        
    <li>
        
        <a href="../index.html"><span>üè†</span><span data-toggle="tooltip" data-title="Home page">
            Home
        </span></a>
        
    </li>
    <li>
        
        <a href="../introduction.html"><span>ü§ù</span><span data-toggle="tooltip" data-title="Introduction and Motivation">
            Introduction
        </span></a>
        
    </li>
    <li>
        
        <a href="config.html" class="highlight"><span>üéõÔ∏è</span><span data-toggle="tooltip" data-title="Configuration options and command line parsing">
            Configuration
        </span></a>
        
    </li>
    <li>
        
        <a href="templates/toc.html"><span>üìñ</span>Table of Contents</a>
        
    </li>
    <li>
        
        <a href="templates/front-matter.html"><span>üìã</span>Front Matter</a>
        
    </li>
    <li>
        
        <a href="region.html"><span>üåç</span><span data-toggle="tooltip" data-title="Embedding Regions of Code in Markdown">
            Regions
        </span></a>
        
    </li>
    <li>
        
        <a href="dependency-graph.html"><span>üï∏Ô∏è</span><span data-toggle="tooltip" data-title="Creating module dependency graph">
            Dependency Graph
        </span></a>
        
    </li>
    <li>
        
        <a href="bundler.html"><span>üì¶</span><span data-toggle="tooltip" data-title="Packing JS & CSS files">
            Bundler
        </span></a>
        
    </li>
    <li>
        <div class="accordion">
        Site Templates
        </div>
            
    <ul>
        
    <li>
        
        <a href="templates/html.html"><span>üìê</span>HTML Templates</a>
        
    </li>
    <li>
        
        <a href="utils.html"><span>üõ†Ô∏è</span>Utilities</a>
        
    </li>
    <li>
        
        <a href="templates/template.html"><span>üì∞</span>Page Templates</a>
        
    </li>
    <li>
        <div class="accordion">
        Default Template
        </div>
            
    <ul>
        
    <li>
        
        <a href="../site/pages/normal/index.html"><span>üêò</span>Normal Page</a>
        
    </li>
    <li>
        
        <a href="../site/styles/theme.html"><span>üé®</span>Theming</a>
        
    </li>
    </ul>
    </li>
    </ul>
    </li>
    <li>
        <div class="accordion">
        Implementation
        </div>
            
    <ul>
        
    <li>
        
        <a href="index.html"><span>üì∫</span><span data-toggle="tooltip" data-title="Main program and exports">
            Main Program
        </span></a>
        
    </li>
    <li>
        
        <a href="cli.html"><span>üêö</span><span data-toggle="tooltip" data-title="Scaffolding functionality">
            Command Line Interface
        </span></a>
        
    </li>
    <li>
        
        <a href="weaver.html"><span>üï∑Ô∏è</span><span data-toggle="tooltip" data-title="Common code for documentation generation">
            Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="md-weaver.html"><span>‚úçÔ∏è</span><span data-toggle="tooltip" data-title="Markdown generation code">
            Markdown Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="html-weaver.html"><span>üîó</span><span data-toggle="tooltip" data-title="HTML generation code">
            HTML Weaver
        </span></a>
        
    </li>
    <li>
        
        <a href="block-list.html"><span>üß±</span><span data-toggle="tooltip" data-title="Data structure for code/markdown fragments">
            Source Blocks
        </span></a>
        
    </li>
    <li>
        <div class="accordion">
        Translators
        </div>
            
    <ul>
        
    <li>
        
        <a href="translators/translators.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Registering and getting translators">
            Translating Input Files
        </span></a>
        
    </li>
    <li>
        
        <a href="translators/base-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Base class and other types related to translators">
            Translator Base Class
        </span></a>
        
    </li>
    <li>
        
        <a href="translators/md-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translator for markdown files">
            Markdown Translator
        </span></a>
        
    </li>
    <li>
        
        <a href="translators/ts-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Common code for TypeScript translator">
            TypeScript Translator
        </span></a>
        
    </li>
    <li>
        
        <a href="translators/ts-html-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translating TypeScript to HTML">
            TypeScript Translator for HTML Output
        </span></a>
        
    </li>
    <li>
        
        <a href="translators/jsdoc-translator.html"><span>üó£Ô∏è</span>Generic JSDoc Translator</a>
        
    </li>
    </ul>
    </li>
    <li>
        
        <a href="logging.html"><span>üìí</span><span data-toggle="tooltip" data-title="Outputting errors and progress to console">
            Logging
        </span></a>
        
    </li>
    </ul>
    </li>
    <li>
        
        <a href="../license.html"><span>üìú</span><span data-toggle="tooltip" data-title="License and usage information">
            License
        </span></a>
        
    </li>
    </ul>
        </div>
                <div class="toc-button"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M7 7l5 5l-5 5" />
            <path d="M13 7l5 5l-5 5" />
        </svg></div>
            </div>
            
        <div class="contentarea closepopups" 
            data-syntax-highlight="son-of-obsidian">
            <h1 id="configuration">Configuration</h1>
<p>LiTScript shares configuration with the TypeScript compiler wherever possible.
It needs, however, some additional settings to control what files are included in
the documentation, what format is outputted, and such.</p>
<p>These settings can be defined in a configuration file called <code>litsconfig.json</code>
which resides in the project root folder along with the standard <code>tsconfig.json</code>
file. The same settings can also be specified as the command line switches. The
name of a switch is the same as the corresponding property in the JSON file.</p>
<p>An example command line could look like this (each settings is described in the
<a href="#options">Options</a> section):</p>

<pre class="syntaxhighlight narrow-scrollbars"><code>lits --baseDir . --outDir temp  --updateToc
</code></pre>
<p>If a setting is not defined in the configuration or on command line, default values
are in effect. These are defined in the <a href="#defaults">Defaults</a> section. The order of
precedence is:</p>
<ol>
<li>Command line</li>
<li><code>litsconfig.json</code> file</li>
<li>Default value</li>
</ol>
<details>
<summary>Click to show / hide...</summary>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="1091" data-toggle="tooltip" data-title="typeof fs">fs</span> <span class="keyword">from</span> <span class="string">&#039;fs&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="1117" data-toggle="tooltip" data-title="typeof ts">ts</span> <span class="keyword">from</span> <span class="string">&#039;typescript&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="1151" data-toggle="tooltip" data-title="path.PlatformPath">path</span> <span class="keyword">from</span> <span class="string">&#039;path&#039;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="1181" data-toggle="tooltip" data-title="typeof fm">fm</span> <span class="keyword">from</span> <span class="string">&#039;./templates/front-matter&#039;</span>
</code></pre>
</details>
<h2 id="configuration-files">Configuration files</h2>
<p>The names of the configuration files are exported constants.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">const</span> <span id="1358" data-toggle="tooltip" data-title="&quot;tsconfig.json&quot;">tsconfig</span> <span class="punctuation">=</span> <span class="string">&quot;tsconfig.json&quot;</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span id="1399" data-toggle="tooltip" data-title="&quot;litsconfig.json&quot;">litsconfig</span> <span class="punctuation">=</span> <span class="string">&quot;litsconfig.json&quot;</span>
</code></pre>
<h2 id="options">Options</h2>
<p>The available settings are defined in the <code>Options</code> interface. Options
specified in JSON and command line are case-insensitive. Keys are converted
to lowercase before comparing them.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">interface</span> <span id="1430" class="typename" data-toggle="tooltip" data-title="Options">Options</span> <span class="punctuation">{</span>
</code></pre>
<h3 id="base-directory">Base Directory</h3>
<p>This setting specifies the project root folder. LiTScript expects to find
the <a href="#configuration-files">configuration files</a> there.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="1685" data-toggle="tooltip" data-title="string">baseDir</span><span class="punctuation">:</span> <span class="keyword">string</span>
</code></pre>
<h3 id="output-directory">Output Directory</h3>
<p>This property points to the directory where the output files are placed. A
typical value for this is the <code>docs/</code> folder under the base directory. From
that directory the documentation files can be easily published to
<a href="https://pages.github.com/">GitHub Pages</a> if the repository is hosted there.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="1905" data-toggle="tooltip" data-title="string">outDir</span><span class="punctuation">:</span> <span class="keyword">string</span>
</code></pre>
<h3 id="output-format">Output Format</h3>
<p>The output format is either <code>markdown</code> or <code>html</code>. If markdown output is chosen
the settings in the front matter are not used.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="2285" data-toggle="tooltip" data-title="&quot;markdown&quot; | &quot;html&quot;">outputFormat</span><span class="punctuation">:</span> <span class="string">&#039;markdown&#039;</span> <span class="punctuation">|</span> <span class="string">&#039;html&#039;</span>
</code></pre>
<h3 id="included-files">Included Files</h3>
<p>The included TypeScript files are defined in the <code>tsconfig.json</code> file,
so these don't have to be specified again. Files of other types that you
want to include have to specified explicitly. The property below contains
a list of <a href="https://github.com/isaacs/minimatch/blob/master/README.md">glob</a> wildcard patterns that are relative to the <code>baseDir</code>.
As an example, to include all files with the <code>.md</code> extension under
directory <code>instructions/</code>, add pattern <code>instructions/**.md</code> to the list.
The double asterisk wild card will find all the files, no matter how
deep they are in the directory tree.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="2519" data-toggle="tooltip" data-title="string[]">files</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span>
</code></pre>
<h3 id="excluded-files">Excluded Files</h3>
<p>Sometimes you want to omit some files from the documentation. You may want to
skip TypeScript files that don't contain any comments, for example. To allow this,
it is possible to specify a list of glob patterns for files to be excluded. This
list is checked after all the included files have been identified. Note that all
the TypeScript files in the project are always compiled, only the documentation
output is skipped. You can exclude markdown files as well with this setting,
although it is generally simpler to use the <code>files</code> setting for that purpose.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="3202" data-toggle="tooltip" data-title="string[]">exclude</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span>
</code></pre>
<h3 id="silent-mode">Silent Mode</h3>
<p>Set the following flag to suppress console output during operation.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="3897" data-toggle="tooltip" data-title="boolean">silent</span><span class="punctuation">:</span> <span class="keyword">boolean</span>
</code></pre>
<h3 id="toc-file">TOC File</h3>
<p>The name of the table of contents a.k.a. <em>TOC</em> file is specified in the following
field. The TOC file has to be placed in the <code>outDir</code> folder as the paths defined
in it are relative to that directory.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="4045" data-toggle="tooltip" data-title="string">tocFile</span><span class="punctuation">:</span> <span class="keyword">string</span>
</code></pre>
<h3 id="automatic-toc-update">Automatic TOC Update</h3>
<p>LiTScript can automatically add new pages in the TOC file, if it finds any.
To enable this functionality, set the <code>updateToc</code> property to <code>true</code>. If you
want to omit some files from TOC, you can add a glob pattern matching those
files to the <code>excludeFromToc</code> array.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="4340" data-toggle="tooltip" data-title="boolean">updateToc</span><span class="punctuation">:</span> <span class="keyword">boolean</span>
    <span id="4722" data-toggle="tooltip" data-title="string[]">excludeFromToc</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span>
</code></pre>
<h3 id="dependency-graph">Dependency Graph</h3>
<p>LiTScript can also create dependency graph that outlines the module
dependency hierarchy and save it in a JSON file. The name of the file
is defined below. If undefined, the file is not produced.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="4752" data-toggle="tooltip" data-title="string">dependencyGraph</span><span class="punctuation">:</span> <span class="keyword">string</span>
</code></pre>
<h3 id="bundle">Bundle</h3>
<p>If you want to skip the <a href="bundler.html">bundling</a> phase for HTML output,
unset the following flag.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="5058" data-toggle="tooltip" data-title="boolean">bundle</span><span class="punctuation">:</span> <span class="keyword">boolean</span>
</code></pre>
<h3 id="watch-mode">Watch Mode</h3>
<p>In watch mode LiTScript compiler runs in background and automatically
regenerates documentation for changed files.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="5240" data-toggle="tooltip" data-title="boolean">watch</span><span class="punctuation">:</span> <span class="keyword">boolean</span>
</code></pre>
<h3 id="deployment-mode">Deployment Mode</h3>
<p>The deployment mode controls whether debugging information needed for
development is included with the generated JavaScript files.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="5442" data-toggle="tooltip" data-title="&quot;dev&quot; | &quot;prod&quot;">deployMode</span><span class="punctuation">:</span> <span class="string">&#039;dev&#039;</span> <span class="punctuation">|</span> <span class="string">&#039;prod&#039;</span>
</code></pre>
<h3 id="front-matter">Front Matter</h3>
<p>Front matter is a template-specific configuration object that is defined
in the template package. Front matter is settings for the default
template can be found <a href="/lits-template/src/front-matter.html">here</a>.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>    <span id="5677" data-toggle="tooltip" data-title="fm.FrontMatter">frontMatter</span><span class="punctuation">:</span> <a href="config.html#1181"><span data-toggle="tooltip" data-title="any">fm</span></a><span class="punctuation">.</span><a href="templates/front-matter.html#508"><span class="typename" data-toggle="tooltip" data-title="fm.FrontMatter">FrontMatter</span></a>
<span class="punctuation">}</span>
</code></pre>
<h2 id="current-options-and-defaults">Current Options and Defaults</h2>
<p>The following global variable contains the settings currently in effect.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">var</span> <span id="6301" data-toggle="tooltip" data-title="Options">options</span><span class="punctuation">:</span> <a href="config.html#1430"><span class="typename" data-toggle="tooltip" data-title="Options">Options</span></a>
</code></pre>
<p>The default values defined below it are used, if a setting is not overridden
in the configuration file or on the command line.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">const</span> <span id="6477" data-toggle="tooltip" data-title="Options">defaults</span><span class="punctuation">:</span> <a href="config.html#1430"><span class="typename" data-toggle="tooltip" data-title="Options">Options</span></a> <span class="punctuation">=</span> <span class="punctuation">{</span>
    <span id="6499" data-toggle="tooltip" data-title="string">baseDir</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span>
    <span id="6518" data-toggle="tooltip" data-title="string">outDir</span><span class="punctuation">:</span> <span class="string">&quot;./docs&quot;</span><span class="punctuation">,</span>
    <span id="6541" data-toggle="tooltip" data-title="&quot;html&quot;">outputFormat</span><span class="punctuation">:</span> <span class="string">&#039;html&#039;</span><span class="punctuation">,</span>
    <span id="6568" data-toggle="tooltip" data-title="string[]">files</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;**.md&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span id="6591" data-toggle="tooltip" data-title="string[]">exclude</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="string">&quot;.git&quot;</span><span class="punctuation">,</span> <span class="string">&quot;node_modules&quot;</span> <span class="punctuation">]</span><span class="punctuation">,</span>
    <span id="6633" data-toggle="tooltip" data-title="false">silent</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span>
    <span id="6653" data-toggle="tooltip" data-title="string">tocFile</span><span class="punctuation">:</span> <span class="string">&quot;toc.json&quot;</span><span class="punctuation">,</span>
    <span id="6679" data-toggle="tooltip" data-title="false">updateToc</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span>
    <span id="6702" data-toggle="tooltip" data-title="undefined[]">excludeFromToc</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span>
    <span id="6727" data-toggle="tooltip" data-title="string">dependencyGraph</span><span class="punctuation">:</span> <span class="string">&quot;dependencies.json&quot;</span><span class="punctuation">,</span>
    <span id="6770" data-toggle="tooltip" data-title="true">bundle</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span>
    <span id="6789" data-toggle="tooltip" data-title="false">watch</span><span class="punctuation">:</span> <span class="keyword">false</span><span class="punctuation">,</span>
    <span id="6808" data-toggle="tooltip" data-title="&quot;dev&quot;">deployMode</span><span class="punctuation">:</span> <span class="string">&#039;dev&#039;</span><span class="punctuation">,</span>
    <span id="6832" data-toggle="tooltip" data-title="fm.FrontMatter">frontMatter</span><span class="punctuation">:</span> <a href="config.html#1181"><span data-toggle="tooltip" data-title="typeof fm">fm</span></a><span class="punctuation">.</span><a href="templates/front-matter.html#4544"><span data-toggle="tooltip" data-title="fm.FrontMatter">defaults</span></a>
<span class="punctuation">}</span>
</code></pre>
<p>We provide a getter to see the effective settings from outside the module.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="6865" class="member" data-toggle="tooltip" data-title="() =&gt; Options">getOptions</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="config.html#1430"><span class="typename" data-toggle="tooltip" data-title="Options">Options</span></a> <span class="punctuation">{</span>
    <span class="keyword">return</span> <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a>
<span class="punctuation">}</span>
</code></pre>
<p>The following function returns the path to the given file relative to the
base directory.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="7018" class="member" data-toggle="tooltip" data-title="(filePath: string) =&gt; string">getBaseRelativePath</span><span class="punctuation">(</span><span id="7167" data-toggle="tooltip" data-title="string">filePath</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <a href="config.html#1151"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(from: string, to: string) =&gt; string">relative</span><span class="punctuation">(</span><a href="config.html#1151"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...paths: string[]) =&gt; string">resolve</span><span class="punctuation">(</span><a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a><span class="punctuation">.</span><a href="config.html#1685"><span data-toggle="tooltip" data-title="string">baseDir</span></a><span class="punctuation">)</span><span class="punctuation">,</span> <a href="config.html#7167"><span data-toggle="tooltip" data-title="string">filePath</span></a><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="setting-options">Setting Options</h2>
<p>To set the options directly from outside the module, we provide this
helper function. Note that we use the Partial<T> utility type to make all
properties optional, and merge the default values to them. After setting
the options, we load the template.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="7256" class="member" data-toggle="tooltip" data-title="(opts: Partial&lt;Options&gt;) =&gt; void">setOptions</span><span class="punctuation">(</span><span id="7590" data-toggle="tooltip" data-title="Partial&lt;Options&gt;">opts</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="Partial&lt;T&gt;">Partial</span><span class="punctuation">&lt;</span><a href="config.html#1430"><span class="typename" data-toggle="tooltip" data-title="Options">Options</span></a><span class="punctuation">&gt;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a> <span class="punctuation">=</span> <a href="config.html#7590"><span data-toggle="tooltip" data-title="Partial&lt;Options&gt;">opts</span></a> <span class="keyword">as</span> <a href="config.html#1430"><span class="typename" data-toggle="tooltip" data-title="Options">Options</span></a>
    <a href="config.html#8244"><span class="member" data-toggle="tooltip" data-title="(source: object, target: object) =&gt; void">mergeOptions</span></a><span class="punctuation">(</span><a href="config.html#6477"><span data-toggle="tooltip" data-title="Options">defaults</span></a><span class="punctuation">,</span> <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h3 id="reading-configuration-file">Reading Configuration File</h3>
<p>The configuration file is read from JSON file into the global <code>options</code>
object. After that default values are merged to the object. Lastly,
we load the template.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="7686" class="member" data-toggle="tooltip" data-title="(baseDir?: string) =&gt; void">readOptionsFromFile</span><span class="punctuation">(</span><span id="7949" data-toggle="tooltip" data-title="string">baseDir</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">=</span> <span class="string">&quot;./&quot;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="7983" data-toggle="tooltip" data-title="string">litsfile</span> <span class="punctuation">=</span> <a href="config.html#1151"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...paths: string[]) =&gt; string">resolve</span><span class="punctuation">(</span><a href="config.html#7949"><span data-toggle="tooltip" data-title="string">baseDir</span></a><span class="punctuation">,</span> <a href="config.html#1399"><span data-toggle="tooltip" data-title="&quot;litsconfig.json&quot;">litsconfig</span></a><span class="punctuation">)</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="config.html#1091"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: fs.PathLike) =&gt; boolean">existsSync</span><span class="punctuation">(</span><a href="config.html#7983"><span data-toggle="tooltip" data-title="string">litsfile</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
        <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a> <span class="punctuation">=</span> <a href="config.html#6477"><span data-toggle="tooltip" data-title="Options">defaults</span></a>
    <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="8116" data-toggle="tooltip" data-title="string">cont</span> <span class="punctuation">=</span> <a href="config.html#1091"><span data-toggle="tooltip" data-title="typeof fs">fs</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (path: fs.PathOrFileDescriptor, options?: { encoding?: null; flag?: string; }): Buffer; (path: fs.PathOrFileDescriptor, options: BufferEncoding | { encoding: BufferEncoding; flag?: string; }): string; (path: fs.PathOrFileDescriptor, options?: BufferEncoding | (fs.ObjectEncodingOptions &amp; { ...; })): string | Buffer...">readFileSync</span><span class="punctuation">(</span><a href="config.html#7983"><span data-toggle="tooltip" data-title="string">litsfile</span></a><span class="punctuation">,</span> <span class="string">&#039;utf8&#039;</span><span class="punctuation">)</span>
        <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a> <span class="punctuation">=</span> <span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(text: string, reviver?: (this: any, key: string, value: any) =&gt; any) =&gt; any">parse</span><span class="punctuation">(</span><a href="config.html#8116"><span data-toggle="tooltip" data-title="string">cont</span></a><span class="punctuation">)</span>
        <a href="config.html#8244"><span class="member" data-toggle="tooltip" data-title="(source: object, target: object) =&gt; void">mergeOptions</span></a><span class="punctuation">(</span><a href="config.html#6477"><span data-toggle="tooltip" data-title="Options">defaults</span></a><span class="punctuation">,</span> <a href="config.html#6301"><span data-toggle="tooltip" data-title="Options">options</span></a><span class="punctuation">)</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h3 id="merging-configuration-objects">Merging Configuration Objects</h3>
<p>The following function recursively merges object properties. It only sets
properties of the <code>target</code> object which are undefined. So, it does not
override any properties already set.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="8244" class="member" data-toggle="tooltip" data-title="(source: object, target: object) =&gt; void">mergeOptions</span><span class="punctuation">(</span><span id="8524" data-toggle="tooltip" data-title="object">source</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">,</span> <span id="8539" data-toggle="tooltip" data-title="object">target</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="8573" data-toggle="tooltip" data-title="string">key</span> <span class="keyword">in</span> <a href="config.html#8524"><span data-toggle="tooltip" data-title="object">source</span></a><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#8524"><span data-toggle="tooltip" data-title="object">source</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(v: PropertyKey) =&gt; boolean">hasOwnProperty</span><span class="punctuation">(</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
            <span class="keyword">let</span> <span id="8648" data-toggle="tooltip" data-title="any">val</span> <span class="punctuation">=</span> <a href="config.html#8524"><span data-toggle="tooltip" data-title="object">source</span></a><span class="punctuation">[</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span>
            <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#8539"><span data-toggle="tooltip" data-title="object">target</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(v: PropertyKey) =&gt; boolean">hasOwnProperty</span><span class="punctuation">(</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
                <span class="keyword">let</span> <span id="8734" data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">valType</span> <span class="punctuation">=</span> <span class="keyword">typeof</span> <a href="config.html#8648"><span data-toggle="tooltip" data-title="any">val</span></a>
                <span class="keyword">if</span> <span class="punctuation">(</span><span class="keyword">typeof</span> <a href="config.html#8539"><span data-toggle="tooltip" data-title="object">target</span></a><span class="punctuation">[</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span> <span class="punctuation">!==</span> <a href="config.html#8734"><span data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">valType</span></a><span class="punctuation">)</span>
                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="typename" data-toggle="tooltip" data-title="SyntaxErrorConstructor">SyntaxError</span><span class="punctuation">(</span>
                        <span class="string">`Invalid value for option &quot;${</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="string">}&quot;. Expected ${</span><a href="config.html#8734"><span data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">valType</span></a><span class="string">}.`</span><span class="punctuation">)</span>
                <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#8734"><span data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">valType</span></a> <span class="punctuation">===</span> <span class="string">&#039;object&#039;</span> <span class="punctuation">&amp;&amp;</span> <span class="punctuation">!</span><span class="punctuation">(</span><a href="config.html#8648"><span data-toggle="tooltip" data-title="any">val</span></a> <span class="keyword">instanceof</span> <span class="typename" data-toggle="tooltip" data-title="ArrayConstructor">Array</span><span class="punctuation">)</span><span class="punctuation">)</span>
                    <a href="config.html#8244"><span class="member" data-toggle="tooltip" data-title="(source: object, target: object) =&gt; void">mergeOptions</span></a><span class="punctuation">(</span><a href="config.html#8648"><span data-toggle="tooltip" data-title="any">val</span></a><span class="punctuation">,</span> <a href="config.html#8539"><span data-toggle="tooltip" data-title="object">target</span></a><span class="punctuation">[</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span><span class="punctuation">)</span>
            <span class="punctuation">}</span>
            <span class="keyword">else</span> <span class="punctuation">{</span>
                <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#8648"><span data-toggle="tooltip" data-title="any">val</span></a> <span class="punctuation">===</span> <span data-toggle="tooltip" data-title="undefined">undefined</span><span class="punctuation">)</span>
                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="typename" data-toggle="tooltip" data-title="ErrorConstructor">Error</span><span class="punctuation">(</span><span class="string">`Mandatory option &quot;${</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="string">}&quot; missing.`</span><span class="punctuation">)</span>
                <a href="config.html#8539"><span data-toggle="tooltip" data-title="object">target</span></a><span class="punctuation">[</span><a href="config.html#8573"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span> <span class="punctuation">=</span> <a href="config.html#8648"><span data-toggle="tooltip" data-title="any">val</span></a>
            <span class="punctuation">}</span>
        <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<h2 id="type-script-compiler-options">TypeScript Compiler Options</h2>
<p>We store the compiler options read from <code>tsconfig.json</code> in a global variable.
This variable can be read and written using the functions below.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">var</span> <span id="9478" data-toggle="tooltip" data-title="ts.CompilerOptions">compilerOptions</span><span class="punctuation">:</span> <a href="config.html#1117"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.CompilerOptions">CompilerOptions</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span id="9514" class="member" data-toggle="tooltip" data-title="() =&gt; ts.CompilerOptions">getCompilerOptions</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">:</span> <a href="config.html#1117"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.CompilerOptions">CompilerOptions</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <a href="config.html#9478"><span data-toggle="tooltip" data-title="ts.CompilerOptions">compilerOptions</span></a>
<span class="punctuation">}</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span id="9607" class="member" data-toggle="tooltip" data-title="(opts: ts.CompilerOptions) =&gt; void">setCompilerOptions</span><span class="punctuation">(</span><span id="9646" data-toggle="tooltip" data-title="ts.CompilerOptions">opts</span><span class="punctuation">:</span> <a href="config.html#1117"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.CompilerOptions">CompilerOptions</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <a href="config.html#9478"><span data-toggle="tooltip" data-title="ts.CompilerOptions">compilerOptions</span></a> <span class="punctuation">=</span> <a href="config.html#9646"><span data-toggle="tooltip" data-title="ts.CompilerOptions">opts</span></a>
<span class="punctuation">}</span>
</code></pre>
<h2 id="command-line-parsing">Command Line Parsing</h2>
<p>The following function finds the field in the <code>options</code> object that corresponds
to the specified command line switch. The search is case-insensitive. If no match
is found, a <code>CommandLineError</code> exception is thrown.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">function</span> <span id="9704" class="member" data-toggle="tooltip" data-title="(option: string, optObj: object) =&gt; string">getOptionKey</span><span class="punctuation">(</span><span id="9997" data-toggle="tooltip" data-title="string">option</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="10012" data-toggle="tooltip" data-title="object">optObj</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">{</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="10054" data-toggle="tooltip" data-title="string">key</span> <span class="keyword">in</span> <a href="config.html#10012"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#10012"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(v: PropertyKey) =&gt; boolean">hasOwnProperty</span><span class="punctuation">(</span><a href="config.html#10054"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">)</span> <span class="punctuation">&amp;&amp;</span>
            <a href="config.html#10054"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">toLowerCase</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">===</span> <a href="config.html#9997"><span data-toggle="tooltip" data-title="string">option</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">toLowerCase</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span>
            <span class="keyword">return</span> <a href="config.html#10054"><span data-toggle="tooltip" data-title="string">key</span></a>
    <span class="keyword">throw</span> <span class="keyword">new</span> <a href="config.html#11629"><span class="typename" data-toggle="tooltip" data-title="typeof CommandLineError">CommandLineError</span></a><span class="punctuation">(</span><span class="string">&quot;Unknown option: --&quot;</span> <span class="punctuation">+</span> <a href="config.html#9997"><span data-toggle="tooltip" data-title="string">option</span></a><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<p>Command line parsing is done generically using the <code>options</code> object as the
schema. Command line switches have the same names as the fields of the object.
Depending on the type of the field the parsing works a bit differently.
Strings are inputted as-is, booleans don't need an argument at all, and other
types are read in as JSON.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="10259" class="member" data-toggle="tooltip" data-title="(args: string[], optObj: object) =&gt; void">parseCommandLine</span><span class="punctuation">(</span><span id="10658" data-toggle="tooltip" data-title="string[]">args</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span> <span id="10673" data-toggle="tooltip" data-title="object">optObj</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="10700" data-toggle="tooltip" data-title="number">i</span> <span class="punctuation">=</span> <span class="number">0</span>
    <span class="keyword">while</span> <span class="punctuation">(</span><a href="config.html#10700"><span data-toggle="tooltip" data-title="number">i</span></a> <span class="punctuation">&lt;</span> <a href="config.html#10658"><span data-toggle="tooltip" data-title="string[]">args</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="10750" data-toggle="tooltip" data-title="string">opt</span> <span class="punctuation">=</span> <a href="config.html#10658"><span data-toggle="tooltip" data-title="string[]">args</span></a><span class="punctuation">[</span><a href="config.html#10700"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">++</span><span class="punctuation">]</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#10750"><span data-toggle="tooltip" data-title="string">opt</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span> <span class="punctuation">!=</span> <span class="string">&#039;-&#039;</span> <span class="punctuation">||</span> <a href="config.html#10750"><span data-toggle="tooltip" data-title="string">opt</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">!=</span> <span class="string">&#039;-&#039;</span><span class="punctuation">)</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> <a href="config.html#11629"><span class="typename" data-toggle="tooltip" data-title="typeof CommandLineError">CommandLineError</span></a><span class="punctuation">(</span><span class="string">&quot;Invalid command line argument: &quot;</span> <span class="punctuation">+</span> <a href="config.html#10750"><span data-toggle="tooltip" data-title="string">opt</span></a><span class="punctuation">)</span>
        <span class="keyword">let</span> <span id="10905" data-toggle="tooltip" data-title="string">key</span> <span class="punctuation">=</span> <a href="config.html#9704"><span class="member" data-toggle="tooltip" data-title="(option: string, optObj: object) =&gt; string">getOptionKey</span></a><span class="punctuation">(</span><a href="config.html#10750"><span data-toggle="tooltip" data-title="string">opt</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(start?: number, end?: number) =&gt; string">slice</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span> <a href="config.html#10673"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">)</span>
        <span class="keyword">let</span> <span id="10959" data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">optype</span> <span class="punctuation">=</span> <span class="keyword">typeof</span> <a href="config.html#10673"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">[</span><a href="config.html#10905"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#10959"><span data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;boolean&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">optype</span></a> <span class="punctuation">===</span> <span class="string">&#039;boolean&#039;</span><span class="punctuation">)</span>
            <a href="config.html#10673"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">[</span><a href="config.html#10905"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span> <span class="punctuation">=</span> <span class="keyword">true</span>
        <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#10700"><span data-toggle="tooltip" data-title="number">i</span></a> <span class="punctuation">==</span> <a href="config.html#10658"><span data-toggle="tooltip" data-title="string[]">args</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span><span class="punctuation">)</span>
            <span class="keyword">throw</span> <span class="keyword">new</span> <a href="config.html#11629"><span class="typename" data-toggle="tooltip" data-title="typeof CommandLineError">CommandLineError</span></a><span class="punctuation">(</span><span class="string">&quot;Value missing for option &quot;</span> <span class="punctuation">+</span> <a href="config.html#10750"><span data-toggle="tooltip" data-title="string">opt</span></a><span class="punctuation">)</span>
        <span class="keyword">else</span> <span class="punctuation">{</span>
            <span class="keyword">let</span> <span id="11198" data-toggle="tooltip" data-title="string">value</span> <span class="punctuation">=</span> <a href="config.html#10658"><span data-toggle="tooltip" data-title="string[]">args</span></a><span class="punctuation">[</span><a href="config.html#10700"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">++</span><span class="punctuation">]</span>
            <a href="config.html#10673"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">[</span><a href="config.html#10905"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span> <span class="punctuation">=</span> <a href="config.html#10959"><span data-toggle="tooltip" data-title="&quot;string&quot; | &quot;number&quot; | &quot;bigint&quot; | &quot;symbol&quot; | &quot;undefined&quot; | &quot;object&quot; | &quot;function&quot;">optype</span></a> <span class="punctuation">===</span> <span class="string">&#039;string&#039;</span> <span class="punctuation">?</span> <a href="config.html#11198"><span data-toggle="tooltip" data-title="string">value</span></a> <span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(text: string, reviver?: (this: any, key: string, value: any) =&gt; any) =&gt; any">parse</span><span class="punctuation">(</span><a href="config.html#11198"><span data-toggle="tooltip" data-title="string">value</span></a><span class="punctuation">)</span>
        <span class="punctuation">}</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>
<p>Outputting command line options works also generically based on the options
object.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">function</span> <span id="11312" class="member" data-toggle="tooltip" data-title="(optObj: object) =&gt; void">printCommandLineOptions</span><span class="punctuation">(</span><span id="11456" data-toggle="tooltip" data-title="object">optObj</span><span class="punctuation">:</span> <span class="keyword">object</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="11489" data-toggle="tooltip" data-title="string">key</span> <span class="keyword">in</span> <a href="config.html#11456"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="config.html#11456"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(v: PropertyKey) =&gt; boolean">hasOwnProperty</span><span class="punctuation">(</span><a href="config.html#11489"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">)</span><span class="punctuation">)</span>
            <span data-toggle="tooltip" data-title="Console">console</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (...data: any[]): void; (message?: any, ...optionalParams: any[]): void; }">log</span><span class="punctuation">(</span><span class="string">`\t--${</span><a href="config.html#11489"><span data-toggle="tooltip" data-title="string">key</span></a><span class="string">} (default: ${</span><span class="typename" data-toggle="tooltip" data-title="JSON">JSON</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (value: any, replacer?: (this: any, key: string, value: any) =&gt; any, space?: string | number): string; (value: any, replacer?: (string | number)[], space?: string | number): string; }">stringify</span><span class="punctuation">(</span><a href="config.html#11456"><span data-toggle="tooltip" data-title="object">optObj</span></a><span class="punctuation">[</span><a href="config.html#11489"><span data-toggle="tooltip" data-title="string">key</span></a><span class="punctuation">]</span><span class="punctuation">)</span><span class="string">})`</span><span class="punctuation">)</span>
<span class="punctuation">}</span>
</code></pre>
<h3 id="command-line-errors">Command Line Errors</h3>
<p>To distinguish command line errors from other types of errors, we define a
new class extending the <code>Error</code> class.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">class</span> <span id="11629" class="typename" data-toggle="tooltip" data-title="CommandLineError">CommandLineError</span> <span class="keyword">extends</span> <span class="typename" data-toggle="tooltip" data-title="ErrorConstructor">Error</span> <span class="punctuation">{</span>
    <span class="keyword">constructor</span><span class="punctuation">(</span><span id="11861" data-toggle="tooltip" data-title="string">message</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">super</span><span class="punctuation">(</span><a href="config.html#11861"><span data-toggle="tooltip" data-title="string">message</span></a><span class="punctuation">)</span>
    <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>

        </div>
            <div class="sidepane narrow-scrollbars">
                
        <div class="pagemenu">
            <h3>On This Page</h3>
                <ul class="pagetree">
                </ul>
        </div>
            </div>
        </div>
        
        <div class="footer">
            <a class="footer-button" href="../introduction.html">
            <p>Previous</p>
            <p>¬´ Introduction</p>
        </a>
            <div class="footer-text">
                <p>Copyright ¬© 2023 Tommi Johtela</p>
                <p>Generated by 
                    <a href="https://johtela.github.io/litscript">LiTScript</a>
                </p>
            </div>
            <a class="footer-button" href="templates/toc.html">
            <p>Next</p>
            <p>Table of Contents ¬ª</p>
        </a>
        </div>
    
        <script src="../dist/normal.js"></script>
    </body>
    </html>