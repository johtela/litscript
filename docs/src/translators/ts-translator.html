
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>
            LiTScript - TypeScript Translator
        </title>
        <link rel="icon" type="image/icon" href="../../images/favicon.svg" />
        <link rel="stylesheet" href="../../dist/normal.css" />
        
    </head>
    <body data-syntax-highlight="monokai"
        data-theme="purple-rain">
        
        <div id="navbar">
            
    <div class="navmenu ">
        
    <div class="navitem " >
        <a class="title enabled" href="../../index.html" >
            <img src="../../images/bulb.svg" />
            <span>LiTScript</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://www.npmjs.com/package/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-npm" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M1 8h22v7h-12v2h-4v-2h-6z" />
            <path d="M7 8v7" />
            <path d="M14 8v7" />
            <path d="M17 11v4" />
            <path d="M4 11v4" />
            <path d="M11 11v1" />
            <path d="M20 11v4" />
        </svg>
            <span>Download</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="https://github.com/johtela/litscript" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
        </svg>
            <span>GitHub</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a class="enabled" href="../../license.html" >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-license" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M15 21h-9a3 3 0 0 1 -3 -3v-1h10v2a2 2 0 0 0 4 0v-14a2 2 0 1 1 2 2h-2m2 -4h-11a3 3 0 0 0 -3 3v11" />
            <path d="M9 7l4 0" />
            <path d="M9 11l4 0" />
        </svg>
            <span>License</span>
        </a>
        
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Syntax Highlight</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="coding-horror">
        <a   onclick="document.body.syntaxHighlight('coding-horror')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Coding Horror</span>
        </a>
        
    </div>
    <div class="navitem active" id="monokai">
        <a   onclick="document.body.syntaxHighlight('monokai')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Monokai</span>
        </a>
        
    </div>
    <div class="navitem " id="solarized-light">
        <a   onclick="document.body.syntaxHighlight('solarized-light')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Solarized Light</span>
        </a>
        
    </div>
    <div class="navitem " id="son-of-obsidian">
        <a   onclick="document.body.syntaxHighlight('son-of-obsidian')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-palette" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" />
            <path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
            <path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
        </svg>
            <span>Son of Obsidian</span>
        </a>
        
    </div>
    </div>
    </div>
    <div class="navitem " >
        <a   >
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-caret-down" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 10l6 6l6 -6h-12" />
        </svg>
            <span>Theme</span>
        </a>
        
    <div class="navmenu toggle">
        
    <div class="navitem " id="blueberry">
        <a   onclick="document.body.theme('blueberry')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Blueberry</span>
        </a>
        
    </div>
    <div class="navitem " id="book-cover">
        <a   onclick="document.body.theme('book-cover')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Book Cover</span>
        </a>
        
    </div>
    <div class="navitem " id="brownie">
        <a   onclick="document.body.theme('brownie')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Brownie</span>
        </a>
        
    </div>
    <div class="navitem " id="camouflage">
        <a   onclick="document.body.theme('camouflage')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Camouflage</span>
        </a>
        
    </div>
    <div class="navitem " id="chocolate">
        <a   onclick="document.body.theme('chocolate')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Chocolate</span>
        </a>
        
    </div>
    <div class="navitem " id="greyhound">
        <a   onclick="document.body.theme('greyhound')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Greyhound</span>
        </a>
        
    </div>
    <div class="navitem " id="ice-age">
        <a   onclick="document.body.theme('ice-age')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ice Age</span>
        </a>
        
    </div>
    <div class="navitem " id="mustard">
        <a   onclick="document.body.theme('mustard')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Mustard</span>
        </a>
        
    </div>
    <div class="navitem " id="peachy">
        <a   onclick="document.body.theme('peachy')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Peachy</span>
        </a>
        
    </div>
    <div class="navitem " id="red-alert">
        <a   onclick="document.body.theme('red-alert')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Red Alert</span>
        </a>
        
    </div>
    <div class="navitem " id="ultra-violet">
        <a   onclick="document.body.theme('ultra-violet')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Ultra Violet</span>
        </a>
        
    </div>
    <div class="navitem " id="vintage">
        <a   onclick="document.body.theme('vintage')">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-paint" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
            <path d="M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2" />
            <path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" />
        </svg>
            <span>Vintage</span>
        </a>
        
    </div>
    </div>
    </div>
    </div>
            
    <a class="hamburger">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
    </a>
        </div>
        
        <div class="layout">
            <div class="sidepane narrow-scrollbars">
                
        <div class="tocmenu">
            <h3>Table of Contents</h3>
            
    <ul>
        
    <li>
        <a href="../../index.html"><span>üè†</span><span data-toggle="tooltip" data-title="Home page">
            Home
        </span></a>
    </li>
    <li>
        <a href="../../introduction.html"><span>ü§ù</span><span data-toggle="tooltip" data-title="Introduction and Motivation">
            Introduction
        </span></a>
    </li>
    <li>
        <a href="../../getting-started.html"><span>üèÅ</span>Getting Started</a>
    </li>
    <li>
        <a href="../config.html"><span>üéõÔ∏è</span><span data-toggle="tooltip" data-title="Configuration options and command line parsing">
            Configuration
        </span></a>
    </li>
    <li>
        <a href="../templates/toc.html"><span>üìñ</span>Table of Contents</a>
    </li>
    <li>
        <a href="../templates/front-matter.html"><span>üìã</span>Front Matter</a>
    </li>
    <li>
        <a href="../region.html"><span>üåç</span><span data-toggle="tooltip" data-title="Embedding Regions of Code in Markdown">
            Regions
        </span></a>
    </li>
    <li>
        <a href="../region-resolver.html"><span>üîó</span><span data-toggle="tooltip" data-title="Dependency resolution and recursive region expansion">
            Region Resolver
        </span></a>
    </li>
    <li>
        <a href="../custom-elem.html"><span>üîå</span>Custom Elements</a>
    </li>
    <li>
        <a href="../dependency-graph.html"><span>üï∏Ô∏è</span><span data-toggle="tooltip" data-title="Creating module dependency graph">
            Dependency Graph
        </span></a>
    </li>
    <li>
        <a href="../bundler.html"><span>üì¶</span><span data-toggle="tooltip" data-title="Packing JS & CSS files">
            Bundler
        </span></a>
    </li>
    <li>
        <a href="../server.html"><span>üì°</span><span data-toggle="tooltip" data-title="Development server setup">
            Server
        </span></a>
    </li>
    <li>
        <a href="../backend.html"><span>üîô</span><span data-toggle="tooltip" data-title="Building server side modules">
            Backend Modules
        </span></a>
    </li>
    <li>
        
    <div class="accordion">
        Site Templates
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="../templates/template.html"><span>üì∞</span><span data-toggle="tooltip" data-title="Creating static web pages">
            Page Templates
        </span></a>
    </li>
    <li>
        <a href="../templates/html.html"><span>üìê</span>HTML Template Literals</a>
    </li>
    <li>
        
    <div class="accordion">
        Default Template
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="../../site/pages/normal/index.html"><span>üêò</span>Normal Page</a>
    </li>
    <li>
        <a href="../../site/pages/landing/index.html"><span>üõ¨</span>Landing Page</a>
    </li>
    <li>
        <a href="../../site/styles/theme.html"><span>üé®</span>Theming</a>
    </li>
    </ul>
    </li>
    </ul>
    </li>
    <li>
        
    <div class="accordion">
        Implementation
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="../index.html"><span>üì∫</span><span data-toggle="tooltip" data-title="Main program and exports">
            Main Program
        </span></a>
    </li>
    <li>
        <a href="../cli.html"><span>üêö</span><span data-toggle="tooltip" data-title="Scaffolding functionality">
            Command Line Interface
        </span></a>
    </li>
    <li>
        <a href="../weaver.html"><span>üï∑Ô∏è</span><span data-toggle="tooltip" data-title="Common code for documentation generation">
            Weaver
        </span></a>
    </li>
    <li>
        <a href="../md-weaver.html"><span>‚úçÔ∏è</span><span data-toggle="tooltip" data-title="Markdown generation code">
            Markdown Weaver
        </span></a>
    </li>
    <li>
        <a href="../html-weaver.html"><span>üîó</span><span data-toggle="tooltip" data-title="HTML generation code">
            HTML Weaver
        </span></a>
    </li>
    <li>
        <a href="../block-list.html"><span>üß±</span><span data-toggle="tooltip" data-title="Data structure for code/markdown fragments">
            Source Blocks
        </span></a>
    </li>
    <li>
        
    <div class="accordion">
        Translators
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-up" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M6 15l6 -6l6 6" />
        </svg>
    </div>
    
    <ul>
        
    <li>
        <a href="translators.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Registering and getting translators">
            Translating Input Files
        </span></a>
    </li>
    <li>
        <a href="base-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Base class and other types related to translators">
            Translator Base Class
        </span></a>
    </li>
    <li>
        <a href="md-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translator for markdown files">
            Markdown Translator
        </span></a>
    </li>
    <li>
        <a href="ts-translator.html" class="highlight"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Common code for TypeScript translator">
            TypeScript Translator
        </span></a>
    </li>
    <li>
        <a href="ts-html-translator.html"><span>üó£Ô∏è</span><span data-toggle="tooltip" data-title="Translating TypeScript to HTML">
            TypeScript Translator for HTML Output
        </span></a>
    </li>
    <li>
        <a href="jsdoc-translator.html"><span>üó£Ô∏è</span>Generic JSDoc Translator</a>
    </li>
    </ul>
    </li>
    <li>
        <a href="../utils.html"><span>üõ†Ô∏è</span><span data-toggle="tooltip" data-title="File path & directory utilities">
            Utilities
        </span></a>
    </li>
    <li>
        <a href="../logging.html"><span>üìí</span><span data-toggle="tooltip" data-title="Outputting errors and progress to console">
            Logging
        </span></a>
    </li>
    </ul>
    </li>
    <li>
        <a href="../../license.html"><span>üìú</span><span data-toggle="tooltip" data-title="License and usage information">
            License
        </span></a>
    </li>
    </ul>
        </div>
                <div class="toc-button"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M7 7l5 5l-5 5" />
            <path d="M13 7l5 5l-5 5" />
        </svg></div>
            </div>
            
        <div class="contentarea closepopups">
            <h1 id="translating-type-script-files">Translating TypeScript Files</h1>
<p>This module contains common code  needed for translating TypeScript files
into block lists. It works as a stand-alone translator for markdown output,
and as a base class for translator used in context of HTML output.</p>
<details>
<summary>ts-translator imports</summary>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="312" data-toggle="tooltip" data-title="path.PlatformPath">path</span> <span class="keyword">from</span> <span class="string">&quot;path&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="342" data-toggle="tooltip" data-title="typeof ts">ts</span> <span class="keyword">from</span> <span class="string">&quot;typescript&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="376" data-toggle="tooltip" data-title="typeof bl">bl</span> <span class="keyword">from</span> <span class="string">&quot;../block-list&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="413" data-toggle="tooltip" data-title="typeof bt">bt</span> <span class="keyword">from</span> <span class="string">&quot;./base-translator&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="454" data-toggle="tooltip" data-title="typeof reg">reg</span> <span class="keyword">from</span> <span class="string">&quot;../region&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="488" data-toggle="tooltip" data-title="typeof dg">dg</span> <span class="keyword">from</span> <span class="string">&quot;../dependency-graph&quot;</span><span class="punctuation">;</span>
<span class="keyword">import</span> <span class="punctuation">*</span> <span class="keyword">as</span> <span id="531" data-toggle="tooltip" data-title="typeof cfg">cfg</span> <span class="keyword">from</span> <span class="string">&quot;../config&quot;</span><span class="punctuation">;</span>
</code></pre>
</details>
<pre class="syntaxhighlight narrow-scrollbars"><code><span class="keyword">export</span> <span class="keyword">class</span> <span id="558" class="typename" data-toggle="tooltip" data-title="TsTranslator">TsTranslator</span> <span class="keyword">extends</span> <a href="ts-translator.html#413"><span data-toggle="tooltip" data-title="typeof bt">bt</span></a><span class="punctuation">.</span><a href="base-translator.html#1248"><span class="typename" data-toggle="tooltip" data-title="typeof bt.Translator">Translator</span></a> <span class="punctuation">{</span>
</code></pre>
<p>Regions can be nested, thus, a stack of open regions is maintained in an
array.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="622" data-toggle="tooltip" data-title="reg.Region[]">regions</span><span class="punctuation">:</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="any">reg</span></a><span class="punctuation">.</span><a href="../region.html#1908"><span class="typename" data-toggle="tooltip" data-title="reg.Region">Region</span></a><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
</code></pre>
<h2 id="extracting-js-doc-comment-text">Extracting JSDoc Comment Text</h2>
<p>The <code>.comment</code> property of a JSDoc node is unreliable
because TypeScript treats any <code>@symbol</code> in the text as a JSDoc tag, even
if it appears in regular markdown text (e.g., &quot;@param, @returns&quot; work properly
or email addresses like &quot;test@example.com&quot;). When TypeScript parses these
as tags, the <code>.comment</code> property only contains the text BEFORE the first tag,
truncating the rest.</p>
<p>The solution is to use <code>node.getText()</code> to extract the full source text,
then strip the <code>/**</code> and <code>*\/</code> delimiters and the leading <code>*</code> from each line.
We also need to filter out lines that are actual JSDoc tags (starting with @
at the beginning of a line after stripping the asterisk).</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="757" class="member" data-toggle="tooltip" data-title="(node: ts.JSDoc) =&gt; string">getJSDocCommentText</span><span class="punctuation">(</span><span id="1565" data-toggle="tooltip" data-title="ts.JSDoc">node</span><span class="punctuation">:</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.JSDoc">JSDoc</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="1598" data-toggle="tooltip" data-title="string">text</span> <span class="punctuation">=</span> <a href="ts-translator.html#1565"><span data-toggle="tooltip" data-title="ts.JSDoc">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile) =&gt; string">getText</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// Remove /** at start and */ at end</span>
    <a href="ts-translator.html#1598"><span data-toggle="tooltip" data-title="string">text</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#1598"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (searchValue: string | RegExp, replaceValue: string): string; (searchValue: string | RegExp, replacer: (substring: string, ...args: any[]) =&gt; string): string; (searchValue: { [Symbol.replace](string: string, replaceValue: string): string; }, replaceValue: string): string; (searchValue: { [Symbol.replace](string: s...">replace</span><span class="punctuation">(</span><span class="string">/^\/\*\*/</span><span class="punctuation">,</span> <span class="string">&quot;&quot;</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (searchValue: string | RegExp, replaceValue: string): string; (searchValue: string | RegExp, replacer: (substring: string, ...args: any[]) =&gt; string): string; (searchValue: { [Symbol.replace](string: string, replaceValue: string): string; }, replaceValue: string): string; (searchValue: { [Symbol.replace](string: s...">replace</span><span class="punctuation">(</span><span class="string">/\*\/$/</span><span class="punctuation">,</span> <span class="string">&quot;&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="comment">// Remove leading * and whitespace from each line</span>
    <span class="keyword">const</span> <span id="1787" data-toggle="tooltip" data-title="string[]">lines</span> <span class="punctuation">=</span> <a href="ts-translator.html#1598"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (separator: string | RegExp, limit?: number): string[]; (splitter: { [Symbol.split](string: string, limit?: number): string[]; }, limit?: number): string[]; }">split</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="&lt;U&gt;(callbackfn: (value: string, index: number, array: string[]) =&gt; U, thisArg?: any) =&gt; U[]">map</span><span class="punctuation">(</span><span class="punctuation">(</span><span id="1818" data-toggle="tooltip" data-title="string">line</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <a href="ts-translator.html#1818"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (searchValue: string | RegExp, replaceValue: string): string; (searchValue: string | RegExp, replacer: (substring: string, ...args: any[]) =&gt; string): string; (searchValue: { [Symbol.replace](string: string, replaceValue: string): string; }, replaceValue: string): string; (searchValue: { [Symbol.replace](string: s...">replace</span><span class="punctuation">(</span><span class="string">/^\s*\*\s?/</span><span class="punctuation">,</span> <span class="string">&quot;&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>

    <span class="comment">// If showJSDocTags is false, filter out all tag lines</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><a href="ts-translator.html#531"><span data-toggle="tooltip" data-title="typeof cfg">cfg</span></a><span class="punctuation">.</span><a href="../config.html#8716"><span class="member" data-toggle="tooltip" data-title="() =&gt; cfg.Options">getOptions</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><a href="../config.html#5786"><span data-toggle="tooltip" data-title="boolean">showJSDocTags</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">return</span> <a href="ts-translator.html#1787"><span data-toggle="tooltip" data-title="string[]">lines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ &lt;S extends string&gt;(predicate: (value: string, index: number, array: string[]) =&gt; value is S, thisArg?: any): S[]; (predicate: (value: string, index: number, array: string[]) =&gt; unknown, thisArg?: any): string[]; }">filter</span><span class="punctuation">(</span><span class="punctuation">(</span><span id="1989" data-toggle="tooltip" data-title="string">line</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">!</span><a href="ts-translator.html#1989"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (regexp: string | RegExp): RegExpMatchArray | null; (matcher: { [Symbol.match](string: string): RegExpMatchArray | null; }): RegExpMatchArray | null; }">match</span><span class="punctuation">(</span><span class="string">/^\s*@\w+/</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(separator?: string) =&gt; string">join</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>

    <span class="comment">// If showJSDocTags is true, separate prose from tags</span>
    <span class="comment">// We need to handle multi-line tags like @example</span>
    <span class="keyword">const</span> <span id="2164" data-toggle="tooltip" data-title="string[]">proseLines</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">const</span> <span id="2201" data-toggle="tooltip" data-title="string[]">tagBlocks</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="2235" data-toggle="tooltip" data-title="string">currentTag</span><span class="punctuation">:</span> <span class="keyword">string</span> <span class="punctuation">|</span> <span class="keyword">null</span> <span class="punctuation">=</span> <span class="keyword">null</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="2277" data-toggle="tooltip" data-title="string[]">currentTagLines</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">[</span><span class="punctuation">]</span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>

    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="2325" data-toggle="tooltip" data-title="string">line</span> <span class="keyword">of</span> <a href="ts-translator.html#1787"><span data-toggle="tooltip" data-title="string[]">lines</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">const</span> <span id="2354" data-toggle="tooltip" data-title="RegExpMatchArray">tagMatch</span> <span class="punctuation">=</span> <a href="ts-translator.html#2325"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (regexp: string | RegExp): RegExpMatchArray | null; (matcher: { [Symbol.match](string: string): RegExpMatchArray | null; }): RegExpMatchArray | null; }">match</span><span class="punctuation">(</span><span class="string">/^\s*@(\w+)/</span><span class="punctuation">)</span><span class="punctuation">;</span>

      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#2354"><span data-toggle="tooltip" data-title="RegExpMatchArray">tagMatch</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="comment">// Save previous tag block if any</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#2235"><span data-toggle="tooltip" data-title="string">currentTag</span></a> <span class="punctuation">&amp;&amp;</span> <a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span> <span class="punctuation">&gt;</span> <span class="number">0</span><span class="punctuation">)</span> <span class="punctuation">{</span>
          <a href="ts-translator.html#2201"><span data-toggle="tooltip" data-title="string[]">tagBlocks</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: string[]) =&gt; number">push</span><span class="punctuation">(</span><a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(separator?: string) =&gt; string">join</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
        <span class="comment">// Start new tag block</span>
        <a href="ts-translator.html#2235"><span data-toggle="tooltip" data-title="string">currentTag</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#2354"><span data-toggle="tooltip" data-title="RegExpMatchArray">tagMatch</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">;</span>
        <a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a> <span class="punctuation">=</span> <span class="punctuation">[</span><a href="ts-translator.html#2325"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">trim</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">]</span><span class="punctuation">;</span>
      <span class="punctuation">}</span> <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#2235"><span data-toggle="tooltip" data-title="string">currentTag</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="comment">// This line belongs to the current tag</span>
        <a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: string[]) =&gt; number">push</span><span class="punctuation">(</span><a href="ts-translator.html#2325"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="comment">// This is prose (not part of any tag)</span>
        <a href="ts-translator.html#2164"><span data-toggle="tooltip" data-title="string[]">proseLines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: string[]) =&gt; number">push</span><span class="punctuation">(</span><a href="ts-translator.html#2325"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
    <span class="punctuation">}</span>

    <span class="comment">// Don&#039;t forget the last tag block</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#2235"><span data-toggle="tooltip" data-title="string">currentTag</span></a> <span class="punctuation">&amp;&amp;</span> <a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span> <span class="punctuation">&gt;</span> <span class="number">0</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <a href="ts-translator.html#2201"><span data-toggle="tooltip" data-title="string[]">tagBlocks</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: string[]) =&gt; number">push</span><span class="punctuation">(</span><a href="ts-translator.html#2277"><span data-toggle="tooltip" data-title="string[]">currentTagLines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(separator?: string) =&gt; string">join</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>

    <span class="comment">// Build result: prose first, then tags in simple format</span>
    <span class="keyword">let</span> <span id="3122" data-toggle="tooltip" data-title="string">result</span> <span class="punctuation">=</span> <a href="ts-translator.html#2164"><span data-toggle="tooltip" data-title="string[]">proseLines</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(separator?: string) =&gt; string">join</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#2201"><span data-toggle="tooltip" data-title="string[]">tagBlocks</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">length</span> <span class="punctuation">&gt;</span> <span class="number">0</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <a href="ts-translator.html#3122"><span data-toggle="tooltip" data-title="string">result</span></a> <span class="punctuation">+=</span> <span class="string">&quot;\n\n&quot;</span><span class="punctuation">;</span>

      <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="3228" data-toggle="tooltip" data-title="string">block</span> <span class="keyword">of</span> <a href="ts-translator.html#2201"><span data-toggle="tooltip" data-title="string[]">tagBlocks</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="comment">// Filter out empty lines and code fence markers</span>
        <span class="keyword">const</span> <span id="3321" data-toggle="tooltip" data-title="string">cleanedBlock</span> <span class="punctuation">=</span> <a href="ts-translator.html#3228"><span data-toggle="tooltip" data-title="string">block</span></a>
          <span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (separator: string | RegExp, limit?: number): string[]; (splitter: { [Symbol.split](string: string, limit?: number): string[]; }, limit?: number): string[]; }">split</span><span class="punctuation">(</span><span class="string">&quot;\n&quot;</span><span class="punctuation">)</span>
          <span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ &lt;S extends string&gt;(predicate: (value: string, index: number, array: string[]) =&gt; value is S, thisArg?: any): S[]; (predicate: (value: string, index: number, array: string[]) =&gt; unknown, thisArg?: any): string[]; }">filter</span><span class="punctuation">(</span><span class="punctuation">(</span><span id="3385" data-toggle="tooltip" data-title="string">line</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <a href="ts-translator.html#3385"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">trim</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">!==</span> <span class="string">&quot;&quot;</span> <span class="punctuation">&amp;&amp;</span> <span class="punctuation">!</span><a href="ts-translator.html#3385"><span data-toggle="tooltip" data-title="string">line</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">trim</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (regexp: string | RegExp): RegExpMatchArray | null; (matcher: { [Symbol.match](string: string): RegExpMatchArray | null; }): RegExpMatchArray | null; }">match</span><span class="punctuation">(</span><span class="string">/^```/</span><span class="punctuation">)</span><span class="punctuation">)</span>
          <span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(separator?: string) =&gt; string">join</span><span class="punctuation">(</span><span class="string">&quot; &quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>

        <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#3321"><span data-toggle="tooltip" data-title="string">cleanedBlock</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
          <a href="ts-translator.html#3122"><span data-toggle="tooltip" data-title="string">result</span></a> <span class="punctuation">+=</span> <span class="string">`\`${</span><a href="ts-translator.html#3321"><span data-toggle="tooltip" data-title="string">cleanedBlock</span></a><span class="string">}\`  \n`</span><span class="punctuation">;</span>
        <span class="punctuation">}</span>
      <span class="punctuation">}</span>
    <span class="punctuation">}</span>

    <span class="keyword">return</span> <a href="ts-translator.html#3122"><span data-toggle="tooltip" data-title="string">result</span></a><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<h2 id="processing-source-files">Processing Source Files</h2>
<p>TypeScript files are processed by traversing the leafs of the
<em>abstract syntax tree</em> (AST) in order. We are deliberately skipping the
nonterminals because we only want to output the source fragments.
TypeScript compiler provides us the JSDoc comments already concatenated
and cleaned up. This saves us from the work of parsing them.</p>
<p>However, we still need to check the <em>trivia</em> fragments ignored by the
TypeScript parser, because they contain normal comments and processing
instructions which we want to show and process. To do this, we maintain
a position in the source file in the <code>prevEnd</code> variable. The variable
contains the ending position of the previous AST node. If the current
node lies on a further position, we know that there is some trivia in
between that we need to parse.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">protected</span> <span id="3589" class="member" data-toggle="tooltip" data-title="() =&gt; void">scanFileForRegions</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="4556" data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a> <span class="keyword">as</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.SourceFile">SourceFile</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="4615" data-toggle="tooltip" data-title="string">src</span> <span class="punctuation">=</span> <a href="ts-translator.html#4556"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile) =&gt; string">getFullText</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

    <span class="comment">// Scan trivia for region markers without creating blocks</span>
    <span class="keyword">let</span> <span id="4715" data-toggle="tooltip" data-title="number">prevEnd</span> <span class="punctuation">=</span> <span class="number">0</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="4743" data-toggle="tooltip" data-title="ts.Node">node</span> <span class="keyword">of</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#9476"><span class="member" data-toggle="tooltip" data-title="(root: ts.Node) =&gt; Iterable&lt;ts.Node&gt;">iterateAst</span></a><span class="punctuation">(</span><a href="ts-translator.html#4556"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">let</span> <span id="4789" data-toggle="tooltip" data-title="number">start</span> <span class="punctuation">=</span> <a href="ts-translator.html#4743"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile, includeJsDocComment?: boolean) =&gt; number">getStart</span><span class="punctuation">(</span><a href="ts-translator.html#4556"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#4789"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&gt;</span> <a href="ts-translator.html#4715"><span data-toggle="tooltip" data-title="number">prevEnd</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#4961"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">scanTriviaForRegions</span></a><span class="punctuation">(</span><a href="ts-translator.html#4615"><span data-toggle="tooltip" data-title="string">src</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(start?: number, end?: number) =&gt; string">slice</span><span class="punctuation">(</span><a href="ts-translator.html#4715"><span data-toggle="tooltip" data-title="number">prevEnd</span></a><span class="punctuation">,</span> <a href="ts-translator.html#4789"><span data-toggle="tooltip" data-title="number">start</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
      <a href="ts-translator.html#4715"><span data-toggle="tooltip" data-title="number">prevEnd</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#4743"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; number">getEnd</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
</code></pre>
<p>Scan trivia text for region markers and register them.
This is a lightweight version of parseTrivia that only looks for #region directives.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="4961" class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">scanTriviaForRegions</span><span class="punctuation">(</span><span id="5156" data-toggle="tooltip" data-title="string">text</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">const</span> <span id="5181" data-toggle="tooltip" data-title="RegExp">regionRE</span> <span class="punctuation">=</span> <span class="string">/\/\/([^\r\n]*)/g</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="5219" data-toggle="tooltip" data-title="RegExpExecArray">match</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="RegExpExecArray">RegExpExecArray</span> <span class="punctuation">|</span> <span class="keyword">null</span><span class="punctuation">;</span>

    <span class="keyword">while</span> <span class="punctuation">(</span><span class="punctuation">(</span><a href="ts-translator.html#5219"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#5181"><span data-toggle="tooltip" data-title="RegExp">regionRE</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="ts-translator.html#5156"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">!==</span> <span class="keyword">null</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">let</span> <span id="5314" data-toggle="tooltip" data-title="string">inner</span> <span class="punctuation">=</span> <a href="ts-translator.html#5219"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">;</span>
      <span class="keyword">let</span> <span id="5342" data-toggle="tooltip" data-title="RegExp">startRegionRE</span> <span class="punctuation">=</span> <span class="string">/^\s*#region\s+(-h|-c)?(.*)$/</span><span class="punctuation">;</span>
      <span class="keyword">let</span> <span id="5399" data-toggle="tooltip" data-title="RegExp">endRegionRE</span> <span class="punctuation">=</span> <span class="string">/^\s*#endregion($|\s)/</span><span class="punctuation">;</span>
      <span class="keyword">let</span> <span id="5447" data-toggle="tooltip" data-title="RegExpExecArray">mt</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="RegExpExecArray">RegExpExecArray</span><span class="punctuation">;</span>

      <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">(</span><a href="ts-translator.html#5447"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#5342"><span data-toggle="tooltip" data-title="RegExp">startRegionRE</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="ts-translator.html#5314"><span data-toggle="tooltip" data-title="string">inner</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#5666"><span class="member" data-toggle="tooltip" data-title="(flags: string, regionName: string) =&gt; void">openRegionScan</span></a><span class="punctuation">(</span><a href="ts-translator.html#5447"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">,</span> <a href="ts-translator.html#5447"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">trim</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span> <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">(</span><a href="ts-translator.html#5447"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#5399"><span data-toggle="tooltip" data-title="RegExp">endRegionRE</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="ts-translator.html#5314"><span data-toggle="tooltip" data-title="string">inner</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#6318"><span class="member" data-toggle="tooltip" data-title="() =&gt; void">closeRegionScan</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
</code></pre>
<p>Open a region during scanning phase (without creating blocks).</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="5666" class="member" data-toggle="tooltip" data-title="(flags: string, regionName: string) =&gt; void">openRegionScan</span><span class="punctuation">(</span><span id="5773" data-toggle="tooltip" data-title="string">flags</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="5787" data-toggle="tooltip" data-title="string">regionName</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="5817" data-toggle="tooltip" data-title="reg.Visibility">vis</span> <span class="punctuation">=</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1872"><span data-toggle="tooltip" data-title="reg.Visibility.Visible">Visible</span></a><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#5773"><span data-toggle="tooltip" data-title="string">flags</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <a href="ts-translator.html#5817"><span data-toggle="tooltip" data-title="reg.Visibility">vis</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#5773"><span data-toggle="tooltip" data-title="string">flags</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">==</span> <span class="string">&quot;c&quot;</span> <span class="punctuation">?</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1893"><span data-toggle="tooltip" data-title="reg.Visibility.Collapsed">Collapsed</span></a> <span class="punctuation">:</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1883"><span data-toggle="tooltip" data-title="reg.Visibility.Hidden">Hidden</span></a><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">let</span> <span id="5958" data-toggle="tooltip" data-title="bt.OutputFile">of</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">;</span>
    <span class="comment">// Create a placeholder block for region start - we just need a marker</span>
    <span class="keyword">let</span> <span id="6063" data-toggle="tooltip" data-title="bl.BlockList">placeholder</span> <span class="punctuation">=</span> <span class="keyword">new</span> <a href="ts-translator.html#376"><span data-toggle="tooltip" data-title="typeof bl">bl</span></a><span class="punctuation">.</span><a href="../block-list.html#582"><span class="typename" data-toggle="tooltip" data-title="typeof bl.BlockList">BlockList</span></a><span class="punctuation">(</span><a href="ts-translator.html#376"><span data-toggle="tooltip" data-title="typeof bl">bl</span></a><span class="punctuation">.</span><a href="../block-list.html#0"><span class="typename" data-toggle="tooltip" data-title="typeof bl.BlockKind">BlockKind</span></a><span class="punctuation">.</span><a href="../block-list.html#279"><span data-toggle="tooltip" data-title="bl.BlockKind.code">code</span></a><span class="punctuation">,</span> <span class="string">&quot;typescript&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: reg.Region[]) =&gt; number">push</span><span class="punctuation">(</span>
      <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1908"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Region">Region</span></a><span class="punctuation">.</span><a href="../region.html#3954"><span class="member" data-toggle="tooltip" data-title="(name: string, start: bl.BlockList, definedInFile: string, relOutputFile: string, mode: reg.Visibility) =&gt; reg.Region">add</span></a><span class="punctuation">(</span>
        <a href="ts-translator.html#5787"><span data-toggle="tooltip" data-title="string">regionName</span></a><span class="punctuation">,</span>
        <a href="ts-translator.html#6063"><span data-toggle="tooltip" data-title="bl.BlockList">placeholder</span></a><span class="punctuation">,</span>
        <span class="punctuation">(</span><a href="ts-translator.html#5958"><span data-toggle="tooltip" data-title="bt.OutputFile">of</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a> <span class="keyword">as</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.SourceFile">SourceFile</span><span class="punctuation">)</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">fileName</span><span class="punctuation">,</span>
        <a href="ts-translator.html#5958"><span data-toggle="tooltip" data-title="bt.OutputFile">of</span></a><span class="punctuation">.</span><a href="base-translator.html#1042"><span data-toggle="tooltip" data-title="string">relTargetPath</span></a><span class="punctuation">,</span>
        <a href="ts-translator.html#5817"><span data-toggle="tooltip" data-title="reg.Visibility">vis</span></a>
      <span class="punctuation">)</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<p>Close a region during scanning phase.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="6318" class="member" data-toggle="tooltip" data-title="() =&gt; void">closeRegionScan</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="6412" data-toggle="tooltip" data-title="reg.Region">region</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; reg.Region">pop</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#6412"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="comment">// Create a placeholder block for region end</span>
      <span class="keyword">let</span> <span id="6520" data-toggle="tooltip" data-title="bl.BlockList">placeholder</span> <span class="punctuation">=</span> <span class="keyword">new</span> <a href="ts-translator.html#376"><span data-toggle="tooltip" data-title="typeof bl">bl</span></a><span class="punctuation">.</span><a href="../block-list.html#582"><span class="typename" data-toggle="tooltip" data-title="typeof bl.BlockList">BlockList</span></a><span class="punctuation">(</span><a href="ts-translator.html#376"><span data-toggle="tooltip" data-title="typeof bl">bl</span></a><span class="punctuation">.</span><a href="../block-list.html#0"><span class="typename" data-toggle="tooltip" data-title="typeof bl.BlockKind">BlockKind</span></a><span class="punctuation">.</span><a href="../block-list.html#279"><span data-toggle="tooltip" data-title="bl.BlockKind.code">code</span></a><span class="punctuation">,</span> <span class="string">&quot;typescript&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <a href="ts-translator.html#6412"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">.</span><a href="../region.html#3678"><span class="member" data-toggle="tooltip" data-title="(end: bl.BlockList) =&gt; void">close</span></a><span class="punctuation">(</span><a href="ts-translator.html#6520"><span data-toggle="tooltip" data-title="bl.BlockList">placeholder</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>

  <span class="keyword">protected</span> <span id="6628" class="member" data-toggle="tooltip" data-title="() =&gt; void">createBlocks</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="6689" data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a> <span class="keyword">as</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.SourceFile">SourceFile</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="6748" data-toggle="tooltip" data-title="dg.Module">module</span> <span class="punctuation">=</span> <a href="ts-translator.html#488"><span data-toggle="tooltip" data-title="typeof dg">dg</span></a><span class="punctuation">.</span><a href="../dependency-graph.html#2217"><span class="member" data-toggle="tooltip" data-title="(name: string, url?: string) =&gt; dg.Module">addModule</span></a><span class="punctuation">(</span>
      <a href="ts-translator.html#531"><span data-toggle="tooltip" data-title="typeof cfg">cfg</span></a><span class="punctuation">.</span><a href="../config.html#8861"><span class="member" data-toggle="tooltip" data-title="(filePath: string) =&gt; string">getBaseRelativePath</span></a><span class="punctuation">(</span><a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">fileName</span><span class="punctuation">)</span><span class="punctuation">,</span>
      <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">.</span><a href="base-translator.html#1042"><span data-toggle="tooltip" data-title="string">relTargetPath</span></a>
    <span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="6871" data-toggle="tooltip" data-title="string">src</span> <span class="punctuation">=</span> <a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile) =&gt; string">getFullText</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

    <span class="comment">// First pass: collect all JSDoc comment ranges to exclude from trivia</span>
    <span class="keyword">const</span> <span id="6986" data-toggle="tooltip" data-title="{ start: number; end: number; }[]">jsdocRanges</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="T[]">Array</span><span class="punctuation">&lt;</span><span class="punctuation">{</span> <span id="7007" data-toggle="tooltip" data-title="number">start</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">;</span> <span id="7022" data-toggle="tooltip" data-title="number">end</span><span class="punctuation">:</span> <span class="keyword">number</span> <span class="punctuation">}</span><span class="punctuation">&gt;</span> <span class="punctuation">=</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="7058" data-toggle="tooltip" data-title="ts.Node">node</span> <span class="keyword">of</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#9476"><span class="member" data-toggle="tooltip" data-title="(root: ts.Node) =&gt; Iterable&lt;ts.Node&gt;">iterateAst</span></a><span class="punctuation">(</span><a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; node is ts.JSDoc">isJSDoc</span><span class="punctuation">(</span><a href="ts-translator.html#7058"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <a href="ts-translator.html#6986"><span data-toggle="tooltip" data-title="{ start: number; end: number; }[]">jsdocRanges</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: { start: number; end: number; }[]) =&gt; number">push</span><span class="punctuation">(</span><span class="punctuation">{</span> <span id="7151" data-toggle="tooltip" data-title="number">start</span><span class="punctuation">:</span> <a href="ts-translator.html#7058"><span data-toggle="tooltip" data-title="ts.JSDoc">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">pos</span><span class="punctuation">,</span> <span id="7168" data-toggle="tooltip" data-title="number">end</span><span class="punctuation">:</span> <a href="ts-translator.html#7058"><span data-toggle="tooltip" data-title="ts.JSDoc">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="number">end</span> <span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
    <span class="punctuation">}</span>

    <span class="comment">// Helper to check if a range overlaps with any JSDoc comment</span>
    <span class="keyword">const</span> <span id="7277" data-toggle="tooltip" data-title="(start: number, end: number) =&gt; boolean">isInJSDoc</span> <span class="punctuation">=</span> <span class="punctuation">(</span><span id="7291" data-toggle="tooltip" data-title="number">start</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">,</span> <span id="7305" data-toggle="tooltip" data-title="number">end</span><span class="punctuation">:</span> <span class="keyword">number</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
      <span class="keyword">return</span> <a href="ts-translator.html#6986"><span data-toggle="tooltip" data-title="{ start: number; end: number; }[]">jsdocRanges</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(predicate: (value: { start: number; end: number; }, index: number, array: { start: number; end: number; }[]) =&gt; unknown, thisArg?: any) =&gt; boolean">some</span><span class="punctuation">(</span>
        <span class="punctuation">(</span><span id="7364" data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span>
          <span class="punctuation">(</span><a href="ts-translator.html#7291"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&gt;=</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7007"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&amp;&amp;</span> <a href="ts-translator.html#7291"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&lt;</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7022"><span data-toggle="tooltip" data-title="number">end</span></a><span class="punctuation">)</span> <span class="punctuation">||</span>
          <span class="punctuation">(</span><a href="ts-translator.html#7305"><span data-toggle="tooltip" data-title="number">end</span></a> <span class="punctuation">&gt;</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7007"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&amp;&amp;</span> <a href="ts-translator.html#7305"><span data-toggle="tooltip" data-title="number">end</span></a> <span class="punctuation">&lt;=</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7022"><span data-toggle="tooltip" data-title="number">end</span></a><span class="punctuation">)</span> <span class="punctuation">||</span>
          <span class="punctuation">(</span><a href="ts-translator.html#7291"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&lt;=</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7007"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&amp;&amp;</span> <a href="ts-translator.html#7305"><span data-toggle="tooltip" data-title="number">end</span></a> <span class="punctuation">&gt;=</span> <a href="ts-translator.html#7364"><span data-toggle="tooltip" data-title="{ start: number; end: number; }">range</span></a><span class="punctuation">.</span><a href="ts-translator.html#7022"><span data-toggle="tooltip" data-title="number">end</span></a><span class="punctuation">)</span>
      <span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span><span class="punctuation">;</span>

    <span class="comment">// Second pass: process nodes</span>
    <span class="keyword">let</span> <span id="7595" data-toggle="tooltip" data-title="number">prevEnd</span> <span class="punctuation">=</span> <span class="number">0</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">const</span> <span id="7623" data-toggle="tooltip" data-title="ts.Node">node</span> <span class="keyword">of</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#9476"><span class="member" data-toggle="tooltip" data-title="(root: ts.Node) =&gt; Iterable&lt;ts.Node&gt;">iterateAst</span></a><span class="punctuation">(</span><a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">let</span> <span id="7669" data-toggle="tooltip" data-title="number">start</span> <span class="punctuation">=</span> <a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile, includeJsDocComment?: boolean) =&gt; number">getStart</span><span class="punctuation">(</span><a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">let</span> <span id="7711" data-toggle="tooltip" data-title="number">end</span> <span class="punctuation">=</span> <a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; number">getEnd</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>

      <span class="comment">// Skip nodes that are inside JSDoc comments</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#7277"><span data-toggle="tooltip" data-title="(start: number, end: number) =&gt; boolean">isInJSDoc</span></a><span class="punctuation">(</span><a href="ts-translator.html#7669"><span data-toggle="tooltip" data-title="number">start</span></a><span class="punctuation">,</span> <a href="ts-translator.html#7711"><span data-toggle="tooltip" data-title="number">end</span></a><span class="punctuation">)</span> <span class="punctuation">&amp;&amp;</span> <span class="punctuation">!</span><a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; node is ts.JSDoc">isJSDoc</span><span class="punctuation">(</span><a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">continue</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>

      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#7669"><span data-toggle="tooltip" data-title="number">start</span></a> <span class="punctuation">&gt;</span> <a href="ts-translator.html#7595"><span data-toggle="tooltip" data-title="number">prevEnd</span></a> <span class="punctuation">&amp;&amp;</span> <span class="punctuation">!</span><a href="ts-translator.html#7277"><span data-toggle="tooltip" data-title="(start: number, end: number) =&gt; boolean">isInJSDoc</span></a><span class="punctuation">(</span><a href="ts-translator.html#7595"><span data-toggle="tooltip" data-title="number">prevEnd</span></a><span class="punctuation">,</span> <a href="ts-translator.html#7669"><span data-toggle="tooltip" data-title="number">start</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#10409"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">parseTrivia</span></a><span class="punctuation">(</span><a href="ts-translator.html#6871"><span data-toggle="tooltip" data-title="string">src</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(start?: number, end?: number) =&gt; string">slice</span><span class="punctuation">(</span><a href="ts-translator.html#7595"><span data-toggle="tooltip" data-title="number">prevEnd</span></a><span class="punctuation">,</span> <a href="ts-translator.html#7669"><span data-toggle="tooltip" data-title="number">start</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; node is ts.JSDoc">isJSDoc</span><span class="punctuation">(</span><a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="8029" data-toggle="tooltip" data-title="string">inner</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#757"><span class="member" data-toggle="tooltip" data-title="(node: ts.JSDoc) =&gt; string">getJSDocCommentText</span></a><span class="punctuation">(</span><span class="punctuation">&lt;</span><a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.JSDoc">JSDoc</span><span class="punctuation">&gt;</span><a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.JSDoc">node</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#3457"><span class="member" data-toggle="tooltip" data-title="(text: string, fileName: string) =&gt; void">splitMdFile</span></a><span class="punctuation">(</span><a href="ts-translator.html#8029"><span data-toggle="tooltip" data-title="string">inner</span></a><span class="punctuation">,</span> <a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">fileName</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="comment">// Add blank line after JSDoc to ensure proper paragraph spacing</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6841"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">appendMarkdown</span></a><span class="punctuation">(</span><span class="string">&quot;\n\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">let</span> <span id="8267" data-toggle="tooltip" data-title="string">text</span> <span class="punctuation">=</span> <a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile) =&gt; string">getText</span><span class="punctuation">(</span><a href="ts-translator.html#6689"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#7194"><span class="member" data-toggle="tooltip" data-title="(node: ts.Node, text: string) =&gt; void">appendCode</span></a><span class="punctuation">(</span><a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">,</span> <a href="ts-translator.html#8267"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#8433"><span class="member" data-toggle="tooltip" data-title="(module: dg.Module, node: ts.Node, text: string) =&gt; void">checkDependency</span></a><span class="punctuation">(</span><a href="ts-translator.html#6748"><span data-toggle="tooltip" data-title="dg.Module">module</span></a><span class="punctuation">,</span> <a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">,</span> <a href="ts-translator.html#8267"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span>
      <a href="ts-translator.html#7595"><span data-toggle="tooltip" data-title="number">prevEnd</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#7623"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; number">getEnd</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
</code></pre>
<h2 id="updating-dependency-graph">Updating Dependency Graph</h2>
<p>While traversing the AST, we check if we encounter import or export
statements. When we do, we add a dependendency to the graph. We need to
normalize the name of the imported module, so we remove the quotes from
it and make its path relative to the base directory.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="8433" class="member" data-toggle="tooltip" data-title="(module: dg.Module, node: ts.Node, text: string) =&gt; void">checkDependency</span><span class="punctuation">(</span><span id="8796" data-toggle="tooltip" data-title="dg.Module">module</span><span class="punctuation">:</span> <a href="ts-translator.html#488"><span data-toggle="tooltip" data-title="any">dg</span></a><span class="punctuation">.</span><a href="../dependency-graph.html#0"><span class="typename" data-toggle="tooltip" data-title="dg.Module">Module</span></a><span class="punctuation">,</span> <span id="8814" data-toggle="tooltip" data-title="ts.Node">node</span><span class="punctuation">:</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.Node">Node</span><span class="punctuation">,</span> <span id="8829" data-toggle="tooltip" data-title="string">text</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">if</span> <span class="punctuation">(</span>
      <a href="ts-translator.html#8814"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind">kind</span> <span class="punctuation">==</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="typeof ts.SyntaxKind">SyntaxKind</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind.StringLiteral">StringLiteral</span> <span class="punctuation">&amp;&amp;</span>
      <a href="ts-translator.html#8814"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.Node">parent</span> <span class="punctuation">&amp;&amp;</span>
      <span class="punctuation">(</span><a href="ts-translator.html#8814"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.Node">parent</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind">kind</span> <span class="punctuation">==</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="typeof ts.SyntaxKind">SyntaxKind</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind.ImportDeclaration">ImportDeclaration</span> <span class="punctuation">||</span>
        <a href="ts-translator.html#8814"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.Node">parent</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind.Unknown | ts.SyntaxKind.EndOfFileToken | ts.SyntaxKind.SingleLineCommentTrivia | ts.SyntaxKind.MultiLineCommentTrivia | ts.SyntaxKind.NewLineTrivia | ts.SyntaxKind.WhitespaceTrivia | ts.SyntaxKind.ShebangTrivia | ts.SyntaxKind.ConflictMarkerTrivia | ts.SyntaxKind.NonTextFileMarkerTrivia | ... 348 more ...">kind</span> <span class="punctuation">==</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="typeof ts.SyntaxKind">SyntaxKind</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="ts.SyntaxKind.ExportDeclaration">ExportDeclaration</span><span class="punctuation">)</span>
    <span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">let</span> <span id="9066" data-toggle="tooltip" data-title="string">fileName</span> <span class="punctuation">=</span> <a href="ts-translator.html#8829"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="{ (searchValue: string | RegExp, replaceValue: string): string; (searchValue: string | RegExp, replacer: (substring: string, ...args: any[]) =&gt; string): string; (searchValue: { [Symbol.replace](string: string, replaceValue: string): string; }, replaceValue: string): string; (searchValue: { [Symbol.replace](string: s...">replace</span><span class="punctuation">(</span><span class="string">/[&#039;&quot;]+/g</span><span class="punctuation">,</span> <span class="string">&quot;&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">[</span><span class="string">&quot;.&quot;</span><span class="punctuation">,</span> <span class="string">&quot;..&quot;</span><span class="punctuation">]</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(searchElement: string, fromIndex?: number) =&gt; boolean">includes</span><span class="punctuation">(</span><a href="ts-translator.html#312"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: string, suffix?: string) =&gt; string">basename</span><span class="punctuation">(</span><a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a> <span class="punctuation">+=</span> <span class="string">&quot;/index&quot;</span><span class="punctuation">;</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span> <span class="punctuation">==</span> <span class="string">&quot;.&quot;</span> <span class="punctuation">||</span> <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span> <span class="punctuation">==</span> <span class="string">&quot;/&quot;</span> <span class="punctuation">||</span> <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span> <span class="punctuation">==</span> <span class="string">&quot;\\&quot;</span><span class="punctuation">)</span>
        <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#531"><span data-toggle="tooltip" data-title="typeof cfg">cfg</span></a><span class="punctuation">.</span><a href="../config.html#8861"><span class="member" data-toggle="tooltip" data-title="(filePath: string) =&gt; string">getBaseRelativePath</span></a><span class="punctuation">(</span>
          <a href="ts-translator.html#312"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...paths: string[]) =&gt; string">resolve</span><span class="punctuation">(</span><a href="ts-translator.html#312"><span data-toggle="tooltip" data-title="path.PlatformPath">path</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(path: string) =&gt; string">dirname</span><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">fileName</span><span class="punctuation">)</span><span class="punctuation">,</span> <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">)</span>
        <span class="punctuation">)</span><span class="punctuation">;</span>
      <a href="ts-translator.html#488"><span data-toggle="tooltip" data-title="typeof dg">dg</span></a><span class="punctuation">.</span><a href="../dependency-graph.html#2217"><span class="member" data-toggle="tooltip" data-title="(name: string, url?: string) =&gt; dg.Module">addModule</span></a><span class="punctuation">(</span><a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <a href="ts-translator.html#488"><span data-toggle="tooltip" data-title="typeof dg">dg</span></a><span class="punctuation">.</span><a href="../dependency-graph.html#2676"><span class="member" data-toggle="tooltip" data-title="(module: dg.Module, dependency: string) =&gt; void">addDependency</span></a><span class="punctuation">(</span><a href="ts-translator.html#8796"><span data-toggle="tooltip" data-title="dg.Module">module</span></a><span class="punctuation">,</span> <a href="ts-translator.html#9066"><span data-toggle="tooltip" data-title="string">fileName</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
</code></pre>
<h2 id="iterating-the-ast">Iterating the AST</h2>
<p>AST iteration is implemented as a recursive <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators">generator</a>. It traverses
the tree in post-order (children are processed before their parents) and
checks for each node, if it is of a correct type. Iteration only returns
JSDoc nodes, tokens, and identifiers, i.e. the nonterminals of the
abstract syntax tree.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span class="punctuation">*</span><span id="9476" class="member" data-toggle="tooltip" data-title="(root: ts.Node) =&gt; Iterable&lt;ts.Node&gt;">iterateAst</span><span class="punctuation">(</span><span id="9984" data-toggle="tooltip" data-title="ts.Node">root</span><span class="punctuation">:</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.Node">Node</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="Iterable&lt;T, TReturn, TNext&gt;">Iterable</span><span class="punctuation">&lt;</span><a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.Node">Node</span><span class="punctuation">&gt;</span> <span class="punctuation">{</span>
    <span class="keyword">function</span> <span id="10019" class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; boolean">validNode</span><span class="punctuation">(</span><span id="10043" data-toggle="tooltip" data-title="ts.Node">node</span><span class="punctuation">:</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.Node">Node</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">return</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; node is ts.JSDoc">isJSDoc</span><span class="punctuation">(</span><a href="ts-translator.html#10043"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span> <span class="punctuation">||</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(n: ts.Node) =&gt; boolean">isToken</span><span class="punctuation">(</span><a href="ts-translator.html#10043"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span> <span class="punctuation">||</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="typeof ts">ts</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; node is ts.Identifier">isIdentifier</span><span class="punctuation">(</span><a href="ts-translator.html#10043"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">let</span> <span id="10149" data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a> <span class="keyword">as</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.SourceFile">SourceFile</span><span class="punctuation">;</span>
    <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="10213" data-toggle="tooltip" data-title="number">i</span> <span class="punctuation">=</span> <span class="number">0</span><span class="punctuation">;</span> <a href="ts-translator.html#10213"><span data-toggle="tooltip" data-title="number">i</span></a> <span class="punctuation">&lt;</span> <a href="ts-translator.html#9984"><span data-toggle="tooltip" data-title="ts.Node">root</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(sourceFile?: ts.SourceFile) =&gt; number">getChildCount</span><span class="punctuation">(</span><a href="ts-translator.html#10149"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">;</span> <span class="punctuation">++</span><a href="ts-translator.html#10213"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">)</span>
      <span class="keyword">for</span> <span class="punctuation">(</span><span class="keyword">let</span> <span id="10273" data-toggle="tooltip" data-title="ts.Node">node</span> <span class="keyword">of</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#9476"><span class="member" data-toggle="tooltip" data-title="(root: ts.Node) =&gt; Iterable&lt;ts.Node&gt;">iterateAst</span></a><span class="punctuation">(</span><a href="ts-translator.html#9984"><span data-toggle="tooltip" data-title="ts.Node">root</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(index: number, sourceFile?: ts.SourceFile) =&gt; ts.Node">getChildAt</span><span class="punctuation">(</span><a href="ts-translator.html#10213"><span data-toggle="tooltip" data-title="number">i</span></a><span class="punctuation">,</span> <a href="ts-translator.html#10149"><span data-toggle="tooltip" data-title="ts.SourceFile">srcFile</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#10019"><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; boolean">validNode</span></a><span class="punctuation">(</span><a href="ts-translator.html#10273"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="keyword">yield</span> <a href="ts-translator.html#10273"><span data-toggle="tooltip" data-title="ts.Node">node</span></a><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#10019"><span class="member" data-toggle="tooltip" data-title="(node: ts.Node) =&gt; boolean">validNode</span></a><span class="punctuation">(</span><a href="ts-translator.html#9984"><span data-toggle="tooltip" data-title="ts.Node">root</span></a><span class="punctuation">)</span><span class="punctuation">)</span> <span class="keyword">yield</span> <a href="ts-translator.html#9984"><span data-toggle="tooltip" data-title="ts.Node">root</span></a><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<h2 id="parsing-trivia">Parsing Trivia</h2>
<p>Whitespace, comments and directives that are not included in the AST
are called <em>trivia</em>. The method below gets a piece of trivia (no pun
intended) and runs a regex to extract comments from it. If it finds
a &quot;normal&quot; single-line or multi-line comment, it outputs it as code.
The method has to be quite careful to preserve the whitespace in the
code and output the text not inside comments as-is.</p>
<p>Note: We exclude JSDoc comments (slash-star-star ... star-slash) from
this regex because they are handled separately as JSDoc nodes and
extracted as markdown.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="10409" class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">parseTrivia</span><span class="punctuation">(</span><span id="11077" data-toggle="tooltip" data-title="string">text</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#5754"><span class="member" data-toggle="tooltip" data-title="(kind: bl.BlockKind) =&gt; void">ensureBlock</span></a><span class="punctuation">(</span><a href="ts-translator.html#376"><span data-toggle="tooltip" data-title="typeof bl">bl</span></a><span class="punctuation">.</span><a href="../block-list.html#0"><span class="typename" data-toggle="tooltip" data-title="typeof bl.BlockKind">BlockKind</span></a><span class="punctuation">.</span><a href="../block-list.html#279"><span data-toggle="tooltip" data-title="bl.BlockKind.code">code</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6114"><span class="member" data-toggle="tooltip" data-title="(text: string, regex: RegExp, matchFn: (matches: RegExpExecArray) =&gt; void, gapFn: (gap: string) =&gt; void) =&gt; void">scan</span></a><span class="punctuation">(</span>
      <a href="ts-translator.html#11077"><span data-toggle="tooltip" data-title="string">text</span></a><span class="punctuation">,</span>
      <span class="string">/(\/\/([^\r\n]*))|(\/\*(?!\*)(.|\n)*?\*\/)/gs</span><span class="punctuation">,</span>
      <span class="punctuation">(</span><span id="11221" data-toggle="tooltip" data-title="RegExpExecArray">match</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="punctuation">{</span>
        <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">)</span> <span class="punctuation">{</span>
          <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">!</span><span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#11486"><span class="member" data-toggle="tooltip" data-title="(inner: string) =&gt; boolean">isRegionMarker</span></a><span class="punctuation">(</span><a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">)</span>
            <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#7327"><span class="member" data-toggle="tooltip" data-title="(text: string, inner: string) =&gt; void">appendSingleLineComment</span></a><span class="punctuation">(</span><a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">,</span> <a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <span class="punctuation">}</span> <span class="keyword">else</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#7473"><span class="member" data-toggle="tooltip" data-title="(text: string, inner: string) =&gt; void">appendMultiLineComment</span></a><span class="punctuation">(</span><a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span><span class="punctuation">,</span> <a href="ts-translator.html#11221"><span data-toggle="tooltip" data-title="RegExpExecArray">match</span></a><span class="punctuation">[</span><span class="number">4</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="punctuation">}</span><span class="punctuation">,</span>
      <span class="punctuation">(</span><span id="11445" data-toggle="tooltip" data-title="string">t</span><span class="punctuation">)</span> <span class="punctuation">=&gt;</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1579"><span data-toggle="tooltip" data-title="bl.BlockList">currBlock</span></a><span class="punctuation">.</span><a href="../block-list.html#2194"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">append</span></a><span class="punctuation">(</span><a href="ts-translator.html#11445"><span data-toggle="tooltip" data-title="string">t</span></a><span class="punctuation">)</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<h2 id="creating-regions">Creating Regions</h2>
<p>The <code>isRegionMarker</code> method checks if a single line comment contains
a <code>#region</code> or <code>#endregion</code> directive and opens or closes a region if it
finds either. It returns true, if a region directive was found.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="11486" class="member" data-toggle="tooltip" data-title="(inner: string) =&gt; boolean">isRegionMarker</span><span class="punctuation">(</span><span id="11775" data-toggle="tooltip" data-title="string">inner</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span><span class="punctuation">:</span> <span class="keyword">boolean</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="11808" data-toggle="tooltip" data-title="RegExp">startRegionRE</span> <span class="punctuation">=</span> <span class="string">/^\s*#region\s+(-h|-c)?(.*)$/</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="11863" data-toggle="tooltip" data-title="RegExp">endRegionRE</span> <span class="punctuation">=</span> <span class="string">/^\s*#endregion($|\s)/</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="11909" data-toggle="tooltip" data-title="RegExpExecArray">mt</span><span class="punctuation">:</span> <span class="typename" data-toggle="tooltip" data-title="RegExpExecArray">RegExpExecArray</span><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">(</span><a href="ts-translator.html#11909"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#11808"><span data-toggle="tooltip" data-title="RegExp">startRegionRE</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="ts-translator.html#11775"><span data-toggle="tooltip" data-title="string">inner</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#12159"><span class="member" data-toggle="tooltip" data-title="(flags: string, regionName: string) =&gt; void">openRegion</span></a><span class="punctuation">(</span><a href="ts-translator.html#11909"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span><span class="punctuation">,</span> <a href="ts-translator.html#11909"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a><span class="punctuation">[</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; string">trim</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">return</span> <span class="keyword">true</span><span class="punctuation">;</span>
    <span class="punctuation">}</span> <span class="keyword">else</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="punctuation">(</span><a href="ts-translator.html#11909"><span data-toggle="tooltip" data-title="RegExpExecArray">mt</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#11863"><span data-toggle="tooltip" data-title="RegExp">endRegionRE</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(string: string) =&gt; RegExpExecArray | null">exec</span><span class="punctuation">(</span><a href="ts-translator.html#11775"><span data-toggle="tooltip" data-title="string">inner</span></a><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#13608"><span class="member" data-toggle="tooltip" data-title="() =&gt; void">closeRegion</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">return</span> <span class="keyword">true</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
    <span class="keyword">return</span> <span class="keyword">false</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<p>A region can have an additional flag which controls whether it is
included in the output or not. There are three options:</p>
<ol>
<li>With no flags the text and code inside the region is shown
normally in the output.</li>
<li>With the <code>-c</code> flag the region is collapsed by default. This is
implemented using a <code>&lt;details&gt;</code> tag. This is of course a HTML
feature, but it works also on GitHub wiki. So, it is implemented
here and not in the <a href="ts-html-translator.html">TsHtmlTranslator</a> subclass.</li>
<li>A region with the <code>-h</code> flag is hidden in output. This is also
implemented as HTML using comment tags, so it works with markdown
wikis.</li>
</ol>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="12159" class="member" data-toggle="tooltip" data-title="(flags: string, regionName: string) =&gt; void">openRegion</span><span class="punctuation">(</span><span id="12933" data-toggle="tooltip" data-title="string">flags</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">,</span> <span id="12947" data-toggle="tooltip" data-title="string">regionName</span><span class="punctuation">:</span> <span class="keyword">string</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="12977" data-toggle="tooltip" data-title="reg.Visibility">vis</span> <span class="punctuation">=</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1872"><span data-toggle="tooltip" data-title="reg.Visibility.Visible">Visible</span></a><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#12933"><span data-toggle="tooltip" data-title="string">flags</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#12933"><span data-toggle="tooltip" data-title="string">flags</span></a><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="punctuation">==</span> <span class="string">&quot;c&quot;</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6841"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">appendMarkdown</span></a><span class="punctuation">(</span>
          <span class="string">`\n\n&lt;details&gt;\n&lt;summary&gt;${</span>
            <a href="ts-translator.html#12947"><span data-toggle="tooltip" data-title="string">regionName</span></a> <span class="punctuation">||</span> <span class="string">&quot;Click to show / hide...&quot;</span>
          <span class="string">}&lt;/summary&gt;\n\n`</span>
        <span class="punctuation">)</span><span class="punctuation">;</span>
        <a href="ts-translator.html#12977"><span data-toggle="tooltip" data-title="reg.Visibility">vis</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1893"><span data-toggle="tooltip" data-title="reg.Visibility.Collapsed">Collapsed</span></a><span class="punctuation">;</span>
      <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6841"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">appendMarkdown</span></a><span class="punctuation">(</span><span class="string">&quot;\n&lt;!--\n\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
        <a href="ts-translator.html#12977"><span data-toggle="tooltip" data-title="reg.Visibility">vis</span></a> <span class="punctuation">=</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1883"><span data-toggle="tooltip" data-title="reg.Visibility.Hidden">Hidden</span></a><span class="punctuation">;</span>
      <span class="punctuation">}</span>
    <span class="punctuation">}</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#5495"><span class="member" data-toggle="tooltip" data-title="(text?: string) =&gt; void">openCodeBlock</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">let</span> <span id="13393" data-toggle="tooltip" data-title="bt.OutputFile">of</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1451"><span data-toggle="tooltip" data-title="bt.OutputFile">outputFile</span></a><span class="punctuation">;</span>
    <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="(...items: reg.Region[]) =&gt; number">push</span><span class="punctuation">(</span>
      <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1908"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Region">Region</span></a><span class="punctuation">.</span><a href="../region.html#3954"><span class="member" data-toggle="tooltip" data-title="(name: string, start: bl.BlockList, definedInFile: string, relOutputFile: string, mode: reg.Visibility) =&gt; reg.Region">add</span></a><span class="punctuation">(</span>
        <a href="ts-translator.html#12947"><span data-toggle="tooltip" data-title="string">regionName</span></a><span class="punctuation">,</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1579"><span data-toggle="tooltip" data-title="bl.BlockList">currBlock</span></a><span class="punctuation">,</span>
        <span class="punctuation">(</span><a href="ts-translator.html#13393"><span data-toggle="tooltip" data-title="bt.OutputFile">of</span></a><span class="punctuation">.</span><a href="base-translator.html#979"><span data-toggle="tooltip" data-title="ts.SourceFile | bt.OtherFile">source</span></a> <span class="keyword">as</span> <a href="ts-translator.html#342"><span data-toggle="tooltip" data-title="any">ts</span></a><span class="punctuation">.</span><span class="typename" data-toggle="tooltip" data-title="ts.SourceFile">SourceFile</span><span class="punctuation">)</span><span class="punctuation">.</span><span data-toggle="tooltip" data-title="string">fileName</span><span class="punctuation">,</span>
        <a href="ts-translator.html#13393"><span data-toggle="tooltip" data-title="bt.OutputFile">of</span></a><span class="punctuation">.</span><a href="base-translator.html#1042"><span data-toggle="tooltip" data-title="string">relTargetPath</span></a><span class="punctuation">,</span>
        <a href="ts-translator.html#12977"><span data-toggle="tooltip" data-title="reg.Visibility">vis</span></a>
      <span class="punctuation">)</span>
    <span class="punctuation">)</span><span class="punctuation">;</span>
  <span class="punctuation">}</span>
</code></pre>
<p>When a region is closed we pop it from the stack and append the
appropriate closing tag to the output, if the region is collapsed or
hidden.</p>
<pre class="syntaxhighlight narrow-scrollbars"><code>  <span class="keyword">private</span> <span id="13608" class="member" data-toggle="tooltip" data-title="() =&gt; void">closeRegion</span><span class="punctuation">(</span><span class="punctuation">)</span> <span class="punctuation">{</span>
    <span class="keyword">let</span> <span id="13810" data-toggle="tooltip" data-title="reg.Region">region</span> <span class="punctuation">=</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="ts-translator.html#622"><span data-toggle="tooltip" data-title="reg.Region[]">regions</span></a><span class="punctuation">.</span><span class="member" data-toggle="tooltip" data-title="() =&gt; reg.Region">pop</span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#13810"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">.</span><a href="../region.html#2603"><span data-toggle="tooltip" data-title="reg.Visibility">visibility</span></a> <span class="punctuation">==</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1872"><span data-toggle="tooltip" data-title="reg.Visibility.Visible">Visible</span></a><span class="punctuation">)</span> <span class="punctuation">{</span>
      <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#5495"><span class="member" data-toggle="tooltip" data-title="(text?: string) =&gt; void">openCodeBlock</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <a href="ts-translator.html#13810"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">.</span><a href="../region.html#3678"><span class="member" data-toggle="tooltip" data-title="(end: bl.BlockList) =&gt; void">close</span></a><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1579"><span data-toggle="tooltip" data-title="bl.BlockList">currBlock</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span> <span class="keyword">else</span> <span class="punctuation">{</span>
      <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#5495"><span class="member" data-toggle="tooltip" data-title="(text?: string) =&gt; void">openCodeBlock</span></a><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <a href="ts-translator.html#13810"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">.</span><a href="../region.html#3678"><span class="member" data-toggle="tooltip" data-title="(end: bl.BlockList) =&gt; void">close</span></a><span class="punctuation">(</span><span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#1579"><span data-toggle="tooltip" data-title="bl.BlockList">currBlock</span></a><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">if</span> <span class="punctuation">(</span><a href="ts-translator.html#13810"><span data-toggle="tooltip" data-title="reg.Region">region</span></a><span class="punctuation">.</span><a href="../region.html#2603"><span data-toggle="tooltip" data-title="reg.Visibility.Hidden | reg.Visibility.Collapsed">visibility</span></a> <span class="punctuation">==</span> <a href="ts-translator.html#454"><span data-toggle="tooltip" data-title="typeof reg">reg</span></a><span class="punctuation">.</span><a href="../region.html#1369"><span class="typename" data-toggle="tooltip" data-title="typeof reg.Visibility">Visibility</span></a><span class="punctuation">.</span><a href="../region.html#1893"><span data-toggle="tooltip" data-title="reg.Visibility.Collapsed">Collapsed</span></a><span class="punctuation">)</span>
        <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6841"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">appendMarkdown</span></a><span class="punctuation">(</span><span class="string">&quot;\n&lt;/details&gt;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
      <span class="keyword">else</span> <span class="keyword">this</span><span class="punctuation">.</span><a href="base-translator.html#6841"><span class="member" data-toggle="tooltip" data-title="(text: string) =&gt; void">appendMarkdown</span></a><span class="punctuation">(</span><span class="string">&quot;\n--&gt;\n&quot;</span><span class="punctuation">)</span><span class="punctuation">;</span>
    <span class="punctuation">}</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span>
</code></pre>

        </div>
            <div class="sidepane narrow-scrollbars">
                
        <div class="pagemenu">
            <h3>On This Page</h3>
                <ul class="pagetree">
                </ul>
        </div>
            </div>
        </div>
        
        <div class="footer">
            <a class="footer-button" href="md-translator.html">
            <p>Previous</p>
            <p>¬´ Markdown Translator</p>
        </a>
            <div class="footer-text">
                <p>Copyright ¬© 2024 Tommi Johtela</p>
                <p>Generated by 
                    <a href="https://johtela.github.io/litscript">LiTScript</a>
                </p>
            </div>
            <a class="footer-button" href="ts-html-translator.html">
            <p>Next</p>
            <p>TypeScript Translator for HTML Output ¬ª</p>
        </a>
        </div>
    
        <script src="../../dist/normal.js"></script>
    </body>
    </html>